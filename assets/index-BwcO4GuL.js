(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function e(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(i){if(i.ep)return;i.ep=!0;const l=e(i);fetch(i.href,l)}})();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _e{}function v(o,t){const e=/\{([^}]+)\}/g;return o.replace(e,(n,i)=>{if(Object.prototype.hasOwnProperty.call(t,i)){const l=t[i];return l!=null?String(l):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function s(o,t,e){for(let l=0;l<t.length-1;l++){const u=t[l];if(u.endsWith("[]")){const a=u.slice(0,-2);if(!(a in o))if(Array.isArray(e))o[a]=Array.from({length:e.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(o[a])){const c=o[a];if(Array.isArray(e))for(let d=0;d<c.length;d++){const f=c[d];s(f,t.slice(l+1),e[d])}else for(const d of c)s(d,t.slice(l+1),e)}return}else if(u.endsWith("[0]")){const a=u.slice(0,-3);a in o||(o[a]=[{}]);const c=o[a];s(c[0],t.slice(l+1),e);return}(!o[u]||typeof o[u]!="object")&&(o[u]={}),o=o[u]}const n=t[t.length-1],i=o[n];if(i!==void 0){if(!e||typeof e=="object"&&Object.keys(e).length===0||e===i)return;if(typeof i=="object"&&typeof e=="object"&&i!==null&&e!==null)Object.assign(i,e);else throw new Error(`Cannot set value for an existing key. Key: ${n}`)}else o[n]=e}function r(o,t){try{if(t.length===1&&t[0]==="_self")return o;for(let e=0;e<t.length;e++){if(typeof o!="object"||o===null)return;const n=t[e];if(n.endsWith("[]")){const i=n.slice(0,-2);if(i in o){const l=o[i];return Array.isArray(l)?l.map(u=>r(u,t.slice(e+1))):void 0}else return}else o=o[n]}return o}catch(e){if(e instanceof TypeError)return;throw e}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function w(o,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(o.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const e=t.split("/",2);return`publishers/${e[0]}/models/${e[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function Pt(o,t){const e=w(o,t);return e?e.startsWith("publishers/")&&o.isVertexAI()?`projects/${o.getProject()}/locations/${o.getLocation()}/${e}`:e.startsWith("models/")&&o.isVertexAI()?`projects/${o.getProject()}/locations/${o.getLocation()}/publishers/google/${e}`:e:""}function Ge(o,t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function ae(o,t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Ge(o,e)):[Ge(o,t)]}function wt(o){return o!=null&&typeof o=="object"&&"parts"in o&&Array.isArray(o.parts)}function nn(o){return o!=null&&typeof o=="object"&&"functionCall"in o}function De(o){return!(o==null||nn(o))}function xt(o){return o==null||Array.isArray(o)&&o.length===0?!1:o.every(De)}function L(o,t){if(t==null)throw new Error("ContentUnion is required");return wt(t)?t:De(t)?{role:"user",parts:ae(o,t)}:{role:"model",parts:ae(o,t)}}function Nt(o,t){if(!t)return[];if(o.isVertexAI()&&Array.isArray(t))return t.flatMap(e=>{const n=L(o,e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]});if(o.isVertexAI()){const e=L(o,t);return e.parts&&e.parts.length>0&&e.parts[0].text!==void 0?[e.parts[0].text]:[]}return Array.isArray(t)?t.map(e=>L(o,e)):[L(o,t)]}function me(o,t,e){e.length!==0&&(xt(e)?t.push({role:"user",parts:ae(o,e)}):t.push({role:"model",parts:ae(o,e)}),e.length=0)}function on(o,t,e,n){De(n)===xt(e)||(me(o,t,e),e.length=0),e.push(n)}function A(o,t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t))return[L(o,t)];const e=[],n=[];for(const i of t)if(wt(i))me(o,e,n),e.push(i);else if(typeof i=="string"||typeof i=="object"&&!Array.isArray(i))on(o,e,n,i);else if(Array.isArray(i))me(o,e,n),e.push({role:"user",parts:ae(o,i)});else throw new Error(`Unsupported content type: ${typeof i}`);return me(o,e,n),e}function he(o,t){if(!o.isVertexAI()&&"default"in t)throw new Error("Default value is not supported in the response schema for the Gemini API.");if("anyOf"in t&&t.anyOf!==void 0)for(const e of t.anyOf)he(o,e);if("items"in t&&t.items!==void 0&&he(o,t.items),"properties"in t&&t.properties!==void 0)for(const e of Object.values(t.properties))he(o,e)}function Lt(o,t){return he(o,t),t}function Dt(o,t){if(typeof t=="object"&&"voiceConfig"in t)return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Vt(o,t){return t}function te(o,t){if(!Array.isArray(t))throw new Error("tool is required and must be an array of Tools");return t}function sn(o,t,e,n=1){const i=!t.startsWith(`${e}/`)&&t.split("/").length===n;return o.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${o.getProject()}/${t}`:t.startsWith(`${e}/`)?`projects/${o.getProject()}/locations/${o.getLocation()}/${t}`:i?`projects/${o.getProject()}/locations/${o.getLocation()}/${e}/${t}`:t:i?`${e}/${t}`:t}function W(o,t){if(typeof t!="string")throw new Error("name must be a string");return sn(o,t,"cachedContents")}function z(o,t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function Ft(o,t){if(typeof t!="string")throw new Error("fromName must be a string");return t.startsWith("files/")?t.split("files/")[1]:t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rn(o,t){const e={};if(r(t,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const n=r(t,["thought"]);n!=null&&s(e,["thought"],n);const i=r(t,["codeExecutionResult"]);i!=null&&s(e,["codeExecutionResult"],i);const l=r(t,["executableCode"]);l!=null&&s(e,["executableCode"],l);const u=r(t,["fileData"]);u!=null&&s(e,["fileData"],u);const a=r(t,["functionCall"]);a!=null&&s(e,["functionCall"],a);const c=r(t,["functionResponse"]);c!=null&&s(e,["functionResponse"],c);const d=r(t,["inlineData"]);d!=null&&s(e,["inlineData"],d);const f=r(t,["text"]);return f!=null&&s(e,["text"],f),e}function ke(o,t){const e={},n=r(t,["parts"]);n!=null&&(Array.isArray(n)?s(e,["parts"],n.map(l=>rn(o,l))):s(e,["parts"],n));const i=r(t,["role"]);return i!=null&&s(e,["role"],i),e}function ln(o,t){const e={};if(r(t,["response"])!==void 0)throw new Error("response parameter is not supported in Gemini API.");const n=r(t,["description"]);n!=null&&s(e,["description"],n);const i=r(t,["name"]);i!=null&&s(e,["name"],i);const l=r(t,["parameters"]);return l!=null&&s(e,["parameters"],l),e}function an(){return{}}function un(o,t){const e={},n=r(t,["mode"]);n!=null&&s(e,["mode"],n);const i=r(t,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function cn(o,t){const e={},n=r(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],un(o,n)),e}function dn(o,t){const e={},n=r(t,["functionDeclarations"]);if(n!=null&&(Array.isArray(n)?s(e,["functionDeclarations"],n.map(a=>ln(o,a))):s(e,["functionDeclarations"],n)),r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");r(t,["googleSearch"])!=null&&s(e,["googleSearch"],an());const l=r(t,["googleSearchRetrieval"]);l!=null&&s(e,["googleSearchRetrieval"],cn(o,l));const u=r(t,["codeExecution"]);return u!=null&&s(e,["codeExecution"],u),e}function fn(o,t){const e={},n=r(t,["mode"]);n!=null&&s(e,["mode"],n);const i=r(t,["allowedFunctionNames"]);return i!=null&&s(e,["allowedFunctionNames"],i),e}function pn(o,t){const e={},n=r(t,["functionCallingConfig"]);return n!=null&&s(e,["functionCallingConfig"],fn(o,n)),e}function mn(o,t,e){const n={},i=r(t,["ttl"]);e!==void 0&&i!=null&&s(e,["ttl"],i);const l=r(t,["expireTime"]);e!==void 0&&l!=null&&s(e,["expireTime"],l);const u=r(t,["displayName"]);e!==void 0&&u!=null&&s(e,["displayName"],u);const a=r(t,["contents"]);e!==void 0&&a!=null&&(Array.isArray(a)?s(e,["contents"],A(o,A(o,a).map(p=>ke(o,p)))):s(e,["contents"],A(o,a)));const c=r(t,["systemInstruction"]);e!==void 0&&c!=null&&s(e,["systemInstruction"],ke(o,L(o,c)));const d=r(t,["tools"]);e!==void 0&&d!=null&&(Array.isArray(d)?s(e,["tools"],d.map(p=>dn(o,p))):s(e,["tools"],d));const f=r(t,["toolConfig"]);return e!==void 0&&f!=null&&s(e,["toolConfig"],pn(o,f)),n}function hn(o,t){const e={},n=r(t,["model"]);n!=null&&s(e,["model"],Pt(o,n));const i=r(t,["config"]);return i!=null&&s(e,["config"],mn(o,i,e)),e}function gn(o,t){const e={},n=r(t,["name"]);n!=null&&s(e,["_url","name"],W(o,n));const i=r(t,["config"]);return i!=null&&s(e,["config"],i),e}function yn(o,t){const e={},n=r(t,["name"]);n!=null&&s(e,["_url","name"],W(o,n));const i=r(t,["config"]);return i!=null&&s(e,["config"],i),e}function Cn(o,t,e){const n={},i=r(t,["ttl"]);e!==void 0&&i!=null&&s(e,["ttl"],i);const l=r(t,["expireTime"]);return e!==void 0&&l!=null&&s(e,["expireTime"],l),n}function En(o,t){const e={},n=r(t,["name"]);n!=null&&s(e,["_url","name"],W(o,n));const i=r(t,["config"]);return i!=null&&s(e,["config"],Cn(o,i,e)),e}function vn(o,t,e){const n={},i=r(t,["pageSize"]);e!==void 0&&i!=null&&s(e,["_query","pageSize"],i);const l=r(t,["pageToken"]);return e!==void 0&&l!=null&&s(e,["_query","pageToken"],l),n}function Tn(o,t){const e={},n=r(t,["config"]);return n!=null&&s(e,["config"],vn(o,n,e)),e}function In(o,t){const e={},n=r(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],n);const i=r(t,["thought"]);i!=null&&s(e,["thought"],i);const l=r(t,["codeExecutionResult"]);l!=null&&s(e,["codeExecutionResult"],l);const u=r(t,["executableCode"]);u!=null&&s(e,["executableCode"],u);const a=r(t,["fileData"]);a!=null&&s(e,["fileData"],a);const c=r(t,["functionCall"]);c!=null&&s(e,["functionCall"],c);const d=r(t,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const f=r(t,["inlineData"]);f!=null&&s(e,["inlineData"],f);const p=r(t,["text"]);return p!=null&&s(e,["text"],p),e}function He(o,t){const e={},n=r(t,["parts"]);n!=null&&(Array.isArray(n)?s(e,["parts"],n.map(l=>In(o,l))):s(e,["parts"],n));const i=r(t,["role"]);return i!=null&&s(e,["role"],i),e}function _n(o,t){const e={},n=r(t,["example"]);n!=null&&s(e,["example"],n);const i=r(t,["pattern"]);i!=null&&s(e,["pattern"],i);const l=r(t,["default"]);l!=null&&s(e,["default"],l);const u=r(t,["maxLength"]);u!=null&&s(e,["maxLength"],u);const a=r(t,["minLength"]);a!=null&&s(e,["minLength"],a);const c=r(t,["minProperties"]);c!=null&&s(e,["minProperties"],c);const d=r(t,["maxProperties"]);d!=null&&s(e,["maxProperties"],d);const f=r(t,["anyOf"]);f!=null&&s(e,["anyOf"],f);const p=r(t,["description"]);p!=null&&s(e,["description"],p);const h=r(t,["enum"]);h!=null&&s(e,["enum"],h);const m=r(t,["format"]);m!=null&&s(e,["format"],m);const g=r(t,["items"]);g!=null&&s(e,["items"],g);const y=r(t,["maxItems"]);y!=null&&s(e,["maxItems"],y);const C=r(t,["maximum"]);C!=null&&s(e,["maximum"],C);const T=r(t,["minItems"]);T!=null&&s(e,["minItems"],T);const E=r(t,["minimum"]);E!=null&&s(e,["minimum"],E);const I=r(t,["nullable"]);I!=null&&s(e,["nullable"],I);const x=r(t,["properties"]);x!=null&&s(e,["properties"],x);const V=r(t,["propertyOrdering"]);V!=null&&s(e,["propertyOrdering"],V);const F=r(t,["required"]);F!=null&&s(e,["required"],F);const q=r(t,["title"]);q!=null&&s(e,["title"],q);const U=r(t,["type"]);return U!=null&&s(e,["type"],U),e}function An(o,t){const e={},n=r(t,["response"]);n!=null&&s(e,["response"],_n(o,n));const i=r(t,["description"]);i!=null&&s(e,["description"],i);const l=r(t,["name"]);l!=null&&s(e,["name"],l);const u=r(t,["parameters"]);return u!=null&&s(e,["parameters"],u),e}function Sn(){return{}}function Mn(o,t){const e={},n=r(t,["mode"]);n!=null&&s(e,["mode"],n);const i=r(t,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function Rn(o,t){const e={},n=r(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],Mn(o,n)),e}function Pn(o,t){const e={},n=r(t,["functionDeclarations"]);n!=null&&(Array.isArray(n)?s(e,["functionDeclarations"],n.map(c=>An(o,c))):s(e,["functionDeclarations"],n));const i=r(t,["retrieval"]);i!=null&&s(e,["retrieval"],i),r(t,["googleSearch"])!=null&&s(e,["googleSearch"],Sn());const u=r(t,["googleSearchRetrieval"]);u!=null&&s(e,["googleSearchRetrieval"],Rn(o,u));const a=r(t,["codeExecution"]);return a!=null&&s(e,["codeExecution"],a),e}function wn(o,t){const e={},n=r(t,["mode"]);n!=null&&s(e,["mode"],n);const i=r(t,["allowedFunctionNames"]);return i!=null&&s(e,["allowedFunctionNames"],i),e}function xn(o,t){const e={},n=r(t,["functionCallingConfig"]);return n!=null&&s(e,["functionCallingConfig"],wn(o,n)),e}function Nn(o,t,e){const n={},i=r(t,["ttl"]);e!==void 0&&i!=null&&s(e,["ttl"],i);const l=r(t,["expireTime"]);e!==void 0&&l!=null&&s(e,["expireTime"],l);const u=r(t,["displayName"]);e!==void 0&&u!=null&&s(e,["displayName"],u);const a=r(t,["contents"]);e!==void 0&&a!=null&&(Array.isArray(a)?s(e,["contents"],A(o,A(o,a).map(p=>He(o,p)))):s(e,["contents"],A(o,a)));const c=r(t,["systemInstruction"]);e!==void 0&&c!=null&&s(e,["systemInstruction"],He(o,L(o,c)));const d=r(t,["tools"]);e!==void 0&&d!=null&&(Array.isArray(d)?s(e,["tools"],d.map(p=>Pn(o,p))):s(e,["tools"],d));const f=r(t,["toolConfig"]);return e!==void 0&&f!=null&&s(e,["toolConfig"],xn(o,f)),n}function Ln(o,t){const e={},n=r(t,["model"]);n!=null&&s(e,["model"],Pt(o,n));const i=r(t,["config"]);return i!=null&&s(e,["config"],Nn(o,i,e)),e}function Dn(o,t){const e={},n=r(t,["name"]);n!=null&&s(e,["_url","name"],W(o,n));const i=r(t,["config"]);return i!=null&&s(e,["config"],i),e}function Vn(o,t){const e={},n=r(t,["name"]);n!=null&&s(e,["_url","name"],W(o,n));const i=r(t,["config"]);return i!=null&&s(e,["config"],i),e}function Fn(o,t,e){const n={},i=r(t,["ttl"]);e!==void 0&&i!=null&&s(e,["ttl"],i);const l=r(t,["expireTime"]);return e!==void 0&&l!=null&&s(e,["expireTime"],l),n}function qn(o,t){const e={},n=r(t,["name"]);n!=null&&s(e,["_url","name"],W(o,n));const i=r(t,["config"]);return i!=null&&s(e,["config"],Fn(o,i,e)),e}function Un(o,t,e){const n={},i=r(t,["pageSize"]);e!==void 0&&i!=null&&s(e,["_query","pageSize"],i);const l=r(t,["pageToken"]);return e!==void 0&&l!=null&&s(e,["_query","pageToken"],l),n}function Gn(o,t){const e={},n=r(t,["config"]);return n!=null&&s(e,["config"],Un(o,n,e)),e}function ge(o,t){const e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);const i=r(t,["displayName"]);i!=null&&s(e,["displayName"],i);const l=r(t,["model"]);l!=null&&s(e,["model"],l);const u=r(t,["createTime"]);u!=null&&s(e,["createTime"],u);const a=r(t,["updateTime"]);a!=null&&s(e,["updateTime"],a);const c=r(t,["expireTime"]);c!=null&&s(e,["expireTime"],c);const d=r(t,["usageMetadata"]);return d!=null&&s(e,["usageMetadata"],d),e}function kn(){return{}}function Hn(o,t){const e={},n=r(t,["nextPageToken"]);n!=null&&s(e,["nextPageToken"],n);const i=r(t,["cachedContents"]);return i!=null&&(Array.isArray(i)?s(e,["cachedContents"],i.map(l=>ge(o,l))):s(e,["cachedContents"],i)),e}function ye(o,t){const e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);const i=r(t,["displayName"]);i!=null&&s(e,["displayName"],i);const l=r(t,["model"]);l!=null&&s(e,["model"],l);const u=r(t,["createTime"]);u!=null&&s(e,["createTime"],u);const a=r(t,["updateTime"]);a!=null&&s(e,["updateTime"],a);const c=r(t,["expireTime"]);c!=null&&s(e,["expireTime"],c);const d=r(t,["usageMetadata"]);return d!=null&&s(e,["usageMetadata"],d),e}function $n(){return{}}function Bn(o,t){const e={},n=r(t,["nextPageToken"]);n!=null&&s(e,["nextPageToken"],n);const i=r(t,["cachedContents"]);return i!=null&&(Array.isArray(i)?s(e,["cachedContents"],i.map(l=>ye(o,l))):s(e,["cachedContents"],i)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ce;(function(o){o.PAGED_ITEM_BATCH_JOBS="batchJobs",o.PAGED_ITEM_MODELS="models",o.PAGED_ITEM_TUNING_JOBS="tuningJobs",o.PAGED_ITEM_FILES="files",o.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Ce||(Ce={}));class qt{constructor(t,e,n,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=e,this.init(t,n,i)}init(t,e,n){var i,l;this.nameInternal=t,this.pageInternal=e[this.nameInternal]||[],this.idxInternal=0;let u={config:{}};n?typeof n=="object"?u=Object.assign({},n):u=n:u={config:{}},u.config&&(u.config.pageToken=e.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(i=u.config)===null||i===void 0?void 0:i.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var $e;(function(o){o.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",o.OUTCOME_OK="OUTCOME_OK",o.OUTCOME_FAILED="OUTCOME_FAILED",o.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})($e||($e={}));var Be;(function(o){o.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",o.PYTHON="PYTHON"})(Be||(Be={}));var S;(function(o){o.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",o.STRING="STRING",o.NUMBER="NUMBER",o.INTEGER="INTEGER",o.BOOLEAN="BOOLEAN",o.ARRAY="ARRAY",o.OBJECT="OBJECT"})(S||(S={}));var Oe;(function(o){o.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",o.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",o.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",o.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",o.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",o.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(Oe||(Oe={}));var Ye;(function(o){o.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",o.SEVERITY="SEVERITY",o.PROBABILITY="PROBABILITY"})(Ye||(Ye={}));var Ke;(function(o){o.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",o.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",o.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",o.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",o.BLOCK_NONE="BLOCK_NONE",o.OFF="OFF"})(Ke||(Ke={}));var Je;(function(o){o.MODE_UNSPECIFIED="MODE_UNSPECIFIED",o.MODE_DYNAMIC="MODE_DYNAMIC"})(Je||(Je={}));var We;(function(o){o.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",o.STOP="STOP",o.MAX_TOKENS="MAX_TOKENS",o.SAFETY="SAFETY",o.RECITATION="RECITATION",o.OTHER="OTHER",o.BLOCKLIST="BLOCKLIST",o.PROHIBITED_CONTENT="PROHIBITED_CONTENT",o.SPII="SPII",o.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",o.IMAGE_SAFETY="IMAGE_SAFETY"})(We||(We={}));var ze;(function(o){o.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",o.NEGLIGIBLE="NEGLIGIBLE",o.LOW="LOW",o.MEDIUM="MEDIUM",o.HIGH="HIGH"})(ze||(ze={}));var be;(function(o){o.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",o.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",o.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",o.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",o.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(be||(be={}));var Xe;(function(o){o.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",o.SAFETY="SAFETY",o.OTHER="OTHER",o.BLOCKLIST="BLOCKLIST",o.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(Xe||(Xe={}));var Qe;(function(o){o.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",o.TEXT="TEXT",o.IMAGE="IMAGE",o.AUDIO="AUDIO"})(Qe||(Qe={}));var Ze;(function(o){o.STATE_UNSPECIFIED="STATE_UNSPECIFIED",o.ACTIVE="ACTIVE",o.ERROR="ERROR"})(Ze||(Ze={}));var je;(function(o){o.MODE_UNSPECIFIED="MODE_UNSPECIFIED",o.MODE_DYNAMIC="MODE_DYNAMIC"})(je||(je={}));var et;(function(o){o.MODE_UNSPECIFIED="MODE_UNSPECIFIED",o.AUTO="AUTO",o.ANY="ANY",o.NONE="NONE"})(et||(et={}));var tt;(function(o){o.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",o.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",o.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",o.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(tt||(tt={}));var nt;(function(o){o.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",o.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",o.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",o.BLOCK_NONE="BLOCK_NONE"})(nt||(nt={}));var ot;(function(o){o.DONT_ALLOW="DONT_ALLOW",o.ALLOW_ADULT="ALLOW_ADULT",o.ALLOW_ALL="ALLOW_ALL"})(ot||(ot={}));var it;(function(o){o.auto="auto",o.en="en",o.ja="ja",o.ko="ko",o.hi="hi"})(it||(it={}));var st;(function(o){o.STATE_UNSPECIFIED="STATE_UNSPECIFIED",o.PROCESSING="PROCESSING",o.ACTIVE="ACTIVE",o.FAILED="FAILED"})(st||(st={}));var rt;(function(o){o.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",o.UPLOADED="UPLOADED",o.GENERATED="GENERATED"})(rt||(rt={}));var lt;(function(o){o.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",o.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",o.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",o.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",o.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(lt||(lt={}));var at;(function(o){o.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",o.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",o.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",o.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(at||(at={}));var ut;(function(o){o.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",o.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",o.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",o.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(ut||(ut={}));var ct;(function(o){o.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",o.TEXT="TEXT",o.IMAGE="IMAGE",o.VIDEO="VIDEO",o.AUDIO="AUDIO",o.DOCUMENT="DOCUMENT"})(ct||(ct={}));class de{get text(){var t,e,n,i,l,u,a,c;if(((i=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",f=!1;const p=[];for(const h of(c=(a=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||a===void 0?void 0:a.parts)!==null&&c!==void 0?c:[]){for(const[m,g]of Object.entries(h))m!=="text"&&m!=="thought"&&(g!==null||g!==void 0)&&p.push(m);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;f=!0,d+=h.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?d:void 0}get functionCalls(){var t,e,n,i,l,u,a,c;if(((i=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(c=(a=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var t,e,n,i,l,u,a,c,d;if(((i=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(c=(a=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var t,e,n,i,l,u,a,c,d;if(((i=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(c=(a=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.output}}class dt{}class ft{}class pt{}class On{}class mt{}class ht{}class Yn{}class Ut{constructor(t){const e={};for(const n of t.headers.entries())e[n[0]]=n[1];this.headers=e,this.responseInternal=t}json(){return this.responseInternal.json()}}class Kn{}class Jn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Wn extends _e{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new qt(Ce.PAGED_ITEM_CACHED_CONTENTS,n=>this.listInternal(n),await this.listInternal(e),e)}async create(t){var e,n;let i,l="",u={};if(this.apiClient.isVertexAI()){const a=Ln(this.apiClient,t);return l=v("cachedContents",a._url),u=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions}).then(c=>c.json()),i.then(c=>ye(this.apiClient,c))}else{const a=hn(this.apiClient,t);return l=v("cachedContents",a._url),u=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions}).then(c=>c.json()),i.then(c=>ge(this.apiClient,c))}}async get(t){var e,n;let i,l="",u={};if(this.apiClient.isVertexAI()){const a=Dn(this.apiClient,t);return l=v("{name}",a._url),u=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions}).then(c=>c.json()),i.then(c=>ye(this.apiClient,c))}else{const a=gn(this.apiClient,t);return l=v("{name}",a._url),u=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions}).then(c=>c.json()),i.then(c=>ge(this.apiClient,c))}}async delete(t){var e,n;let i,l="",u={};if(this.apiClient.isVertexAI()){const a=Vn(this.apiClient,t);return l=v("{name}",a._url),u=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions}).then(c=>c.json()),i.then(()=>{const c=$n(),d=new mt;return Object.assign(d,c),d})}else{const a=yn(this.apiClient,t);return l=v("{name}",a._url),u=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions}).then(c=>c.json()),i.then(()=>{const c=kn(),d=new mt;return Object.assign(d,c),d})}}async update(t){var e,n;let i,l="",u={};if(this.apiClient.isVertexAI()){const a=qn(this.apiClient,t);return l=v("{name}",a._url),u=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"PATCH",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions}).then(c=>c.json()),i.then(c=>ye(this.apiClient,c))}else{const a=En(this.apiClient,t);return l=v("{name}",a._url),u=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions}).then(c=>c.json()),i.then(c=>ge(this.apiClient,c))}}async listInternal(t){var e,n;let i,l="",u={};if(this.apiClient.isVertexAI()){const a=Gn(this.apiClient,t);return l=v("cachedContents",a._url),u=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions}).then(c=>c.json()),i.then(c=>{const d=Bn(this.apiClient,c),f=new ht;return Object.assign(f,d),f})}else{const a=Tn(this.apiClient,t);return l=v("cachedContents",a._url),u=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions}).then(c=>c.json()),i.then(c=>{const d=Hn(this.apiClient,c),f=new ht;return Object.assign(f,d),f})}}}function gt(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],n=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&n>=o.length&&(o=void 0),{value:o&&o[n++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function P(o){return this instanceof P?(this.v=o,this):new P(o)}function Ee(o,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e.apply(o,t||[]),i,l=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",u),i[Symbol.asyncIterator]=function(){return this},i;function u(m){return function(g){return Promise.resolve(g).then(m,p)}}function a(m,g){n[m]&&(i[m]=function(y){return new Promise(function(C,T){l.push([m,y,C,T])>1||c(m,y)})},g&&(i[m]=g(i[m])))}function c(m,g){try{d(n[m](g))}catch(y){h(l[0][3],y)}}function d(m){m.value instanceof P?Promise.resolve(m.value.v).then(f,p):h(l[0][2],m)}function f(m){c("next",m)}function p(m){c("throw",m)}function h(m,g){m(g),l.shift(),l.length&&c(l[0][0],l[0][1])}}function xe(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=o[Symbol.asyncIterator],e;return t?t.call(o):(o=typeof gt=="function"?gt(o):o[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(l){e[l]=o[l]&&function(u){return new Promise(function(a,c){u=o[l](u),i(a,c,u.done,u.value)})}}function i(l,u,a,c){Promise.resolve(c).then(function(d){l({value:d,done:a})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zn(o){var t;if(o.candidates==null||o.candidates.length===0)return!1;const e=(t=o.candidates[0])===null||t===void 0?void 0:t.content;return e===void 0?!1:Gt(e)}function Gt(o){if(o.parts===void 0||o.parts.length===0)return!1;for(const t of o.parts)if(t===void 0||Object.keys(t).length===0||t.text!==void 0&&t.text==="")return!1;return!0}function bn(o){if(o.length!==0){if(o[0].role!=="user")throw new Error("History must start with a user turn.");for(const t of o)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function Xn(o){if(o===void 0||o.length===0)return[];const t=[],e=o.length;let n=0,i=o[0];for(;n<e;)if(o[n].role==="user")i=o[n],n++;else{const l=[];let u=!0;for(;n<e&&o[n].role==="model";)l.push(o[n]),u&&!Gt(o[n])&&(u=!1),n++;u&&(t.push(i),t.push(...l))}return t}class Qn{constructor(t,e){this.modelsModule=t,this.apiClient=e}create(t){return new Zn(this.apiClient,this.modelsModule,t.model,t.config,t.history)}}class Zn{constructor(t,e,n,i={},l=[]){this.apiClient=t,this.modelsModule=e,this.model=n,this.config=i,this.history=l,this.sendPromise=Promise.resolve(),bn(l)}async sendMessage(t){var e;await this.sendPromise;const n=L(this.apiClient,t.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:(e=t.config)!==null&&e!==void 0?e:this.config});return this.sendPromise=(async()=>{var l,u;const c=(u=(l=(await i).candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,d=c?[c]:[];this.recordHistory(n,d)})(),await this.sendPromise,i}async sendMessageStream(t){var e;await this.sendPromise;const n=L(this.apiClient,t.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:(e=t.config)!==null&&e!==void 0?e:this.config});this.sendPromise=i.then(()=>{});const l=await i;return this.processStreamResponse(l,n)}getHistory(t=!1){return t?Xn(this.history):this.history}processStreamResponse(t,e){var n,i;return Ee(this,arguments,function*(){var u,a,c,d;const f=[];try{for(var p=!0,h=xe(t),m;m=yield P(h.next()),u=m.done,!u;p=!0){d=m.value,p=!1;const g=d;if(zn(g)){const y=(i=(n=g.candidates)===null||n===void 0?void 0:n[0])===null||i===void 0?void 0:i.content;y!==void 0&&f.push(y)}yield yield P(g)}}catch(g){a={error:g}}finally{try{!p&&!u&&(c=h.return)&&(yield P(c.call(h)))}finally{if(a)throw a.error}}this.recordHistory(e,f)})}recordHistory(t,e){let n=[];e.length>0&&e.every(i=>i.role==="model")?n=e:n.push({role:"model",parts:[]}),this.history.push(t),this.history.push(...n)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jn(o,t,e){const n={},i=r(t,["pageSize"]);e!==void 0&&i!=null&&s(e,["_query","pageSize"],i);const l=r(t,["pageToken"]);return e!==void 0&&l!=null&&s(e,["_query","pageToken"],l),n}function eo(o,t){const e={},n=r(t,["config"]);return n!=null&&s(e,["config"],jn(o,n,e)),e}function to(o,t){const e={},n=r(t,["details"]);n!=null&&s(e,["details"],n);const i=r(t,["message"]);i!=null&&s(e,["message"],i);const l=r(t,["code"]);return l!=null&&s(e,["code"],l),e}function no(o,t){const e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);const i=r(t,["displayName"]);i!=null&&s(e,["displayName"],i);const l=r(t,["mimeType"]);l!=null&&s(e,["mimeType"],l);const u=r(t,["sizeBytes"]);u!=null&&s(e,["sizeBytes"],u);const a=r(t,["createTime"]);a!=null&&s(e,["createTime"],a);const c=r(t,["expirationTime"]);c!=null&&s(e,["expirationTime"],c);const d=r(t,["updateTime"]);d!=null&&s(e,["updateTime"],d);const f=r(t,["sha256Hash"]);f!=null&&s(e,["sha256Hash"],f);const p=r(t,["uri"]);p!=null&&s(e,["uri"],p);const h=r(t,["downloadUri"]);h!=null&&s(e,["downloadUri"],h);const m=r(t,["state"]);m!=null&&s(e,["state"],m);const g=r(t,["source"]);g!=null&&s(e,["source"],g);const y=r(t,["videoMetadata"]);y!=null&&s(e,["videoMetadata"],y);const C=r(t,["error"]);return C!=null&&s(e,["error"],to(o,C)),e}function oo(o,t){const e={},n=r(t,["file"]);n!=null&&s(e,["file"],no(o,n));const i=r(t,["config"]);return i!=null&&s(e,["config"],i),e}function io(o,t){const e={},n=r(t,["name"]);n!=null&&s(e,["_url","file"],Ft(o,n));const i=r(t,["config"]);return i!=null&&s(e,["config"],i),e}function so(o,t){const e={},n=r(t,["name"]);n!=null&&s(e,["_url","file"],Ft(o,n));const i=r(t,["config"]);return i!=null&&s(e,["config"],i),e}function ro(o,t){const e={},n=r(t,["details"]);n!=null&&s(e,["details"],n);const i=r(t,["message"]);i!=null&&s(e,["message"],i);const l=r(t,["code"]);return l!=null&&s(e,["code"],l),e}function Ne(o,t){const e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);const i=r(t,["displayName"]);i!=null&&s(e,["displayName"],i);const l=r(t,["mimeType"]);l!=null&&s(e,["mimeType"],l);const u=r(t,["sizeBytes"]);u!=null&&s(e,["sizeBytes"],u);const a=r(t,["createTime"]);a!=null&&s(e,["createTime"],a);const c=r(t,["expirationTime"]);c!=null&&s(e,["expirationTime"],c);const d=r(t,["updateTime"]);d!=null&&s(e,["updateTime"],d);const f=r(t,["sha256Hash"]);f!=null&&s(e,["sha256Hash"],f);const p=r(t,["uri"]);p!=null&&s(e,["uri"],p);const h=r(t,["downloadUri"]);h!=null&&s(e,["downloadUri"],h);const m=r(t,["state"]);m!=null&&s(e,["state"],m);const g=r(t,["source"]);g!=null&&s(e,["source"],g);const y=r(t,["videoMetadata"]);y!=null&&s(e,["videoMetadata"],y);const C=r(t,["error"]);return C!=null&&s(e,["error"],ro(o,C)),e}function lo(o,t){const e={},n=r(t,["nextPageToken"]);n!=null&&s(e,["nextPageToken"],n);const i=r(t,["files"]);return i!=null&&(Array.isArray(i)?s(e,["files"],i.map(l=>Ne(o,l))):s(e,["files"],i)),e}function ao(o,t){const e={},n=r(t,["httpHeaders"]);return n!=null&&s(e,["httpHeaders"],n),e}function uo(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class co extends _e{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new qt(Ce.PAGED_ITEM_FILES,n=>this.listInternal(n),await this.listInternal(e),e)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(e=>Ne(this.apiClient,e))}async listInternal(t){var e;let n,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=eo(this.apiClient,t);return i=v("files",u._url),l=u._query,delete u.config,delete u._url,delete u._query,n=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions}).then(a=>a.json()),n.then(a=>{const c=lo(this.apiClient,a),d=new Yn;return Object.assign(d,c),d})}}async createInternal(t){var e;let n,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=oo(this.apiClient,t);return i=v("upload/v1beta/files",u._url),l=u._query,delete u.config,delete u._url,delete u._query,n=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions}).then(a=>a.json()),n.then(a=>{const c=ao(this.apiClient,a),d=new Kn;return Object.assign(d,c),d})}}async get(t){var e;let n,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=io(this.apiClient,t);return i=v("files/{file}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,n=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions}).then(a=>a.json()),n.then(a=>Ne(this.apiClient,a))}}async delete(t){var e;let n,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=so(this.apiClient,t);return i=v("files/{file}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,n=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions}).then(a=>a.json()),n.then(()=>{const a=uo(),c=new Jn;return Object.assign(c,a),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fo(o,t){const e={};if(r(t,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const n=r(t,["thought"]);n!=null&&s(e,["thought"],n);const i=r(t,["codeExecutionResult"]);i!=null&&s(e,["codeExecutionResult"],i);const l=r(t,["executableCode"]);l!=null&&s(e,["executableCode"],l);const u=r(t,["fileData"]);u!=null&&s(e,["fileData"],u);const a=r(t,["functionCall"]);a!=null&&s(e,["functionCall"],a);const c=r(t,["functionResponse"]);c!=null&&s(e,["functionResponse"],c);const d=r(t,["inlineData"]);d!=null&&s(e,["inlineData"],d);const f=r(t,["text"]);return f!=null&&s(e,["text"],f),e}function ce(o,t){const e={},n=r(t,["parts"]);n!=null&&(Array.isArray(n)?s(e,["parts"],n.map(l=>fo(o,l))):s(e,["parts"],n));const i=r(t,["role"]);return i!=null&&s(e,["role"],i),e}function po(o,t){const e={};if(r(t,["example"])!==void 0)throw new Error("example parameter is not supported in Gemini API.");if(r(t,["pattern"])!==void 0)throw new Error("pattern parameter is not supported in Gemini API.");if(r(t,["default"])!==void 0)throw new Error("default parameter is not supported in Gemini API.");if(r(t,["maxLength"])!==void 0)throw new Error("maxLength parameter is not supported in Gemini API.");if(r(t,["minLength"])!==void 0)throw new Error("minLength parameter is not supported in Gemini API.");if(r(t,["minProperties"])!==void 0)throw new Error("minProperties parameter is not supported in Gemini API.");if(r(t,["maxProperties"])!==void 0)throw new Error("maxProperties parameter is not supported in Gemini API.");const n=r(t,["anyOf"]);n!=null&&s(e,["anyOf"],n);const i=r(t,["description"]);i!=null&&s(e,["description"],i);const l=r(t,["enum"]);l!=null&&s(e,["enum"],l);const u=r(t,["format"]);u!=null&&s(e,["format"],u);const a=r(t,["items"]);a!=null&&s(e,["items"],a);const c=r(t,["maxItems"]);c!=null&&s(e,["maxItems"],c);const d=r(t,["maximum"]);d!=null&&s(e,["maximum"],d);const f=r(t,["minItems"]);f!=null&&s(e,["minItems"],f);const p=r(t,["minimum"]);p!=null&&s(e,["minimum"],p);const h=r(t,["nullable"]);h!=null&&s(e,["nullable"],h);const m=r(t,["properties"]);m!=null&&s(e,["properties"],m);const g=r(t,["propertyOrdering"]);g!=null&&s(e,["propertyOrdering"],g);const y=r(t,["required"]);y!=null&&s(e,["required"],y);const C=r(t,["title"]);C!=null&&s(e,["title"],C);const T=r(t,["type"]);return T!=null&&s(e,["type"],T),e}function mo(o,t){const e={};if(r(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=r(t,["category"]);n!=null&&s(e,["category"],n);const i=r(t,["threshold"]);return i!=null&&s(e,["threshold"],i),e}function ho(o,t){const e={};if(r(t,["response"])!==void 0)throw new Error("response parameter is not supported in Gemini API.");const n=r(t,["description"]);n!=null&&s(e,["description"],n);const i=r(t,["name"]);i!=null&&s(e,["name"],i);const l=r(t,["parameters"]);return l!=null&&s(e,["parameters"],l),e}function go(){return{}}function yo(o,t){const e={},n=r(t,["mode"]);n!=null&&s(e,["mode"],n);const i=r(t,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function Co(o,t){const e={},n=r(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],yo(o,n)),e}function kt(o,t){const e={},n=r(t,["functionDeclarations"]);if(n!=null&&(Array.isArray(n)?s(e,["functionDeclarations"],n.map(a=>ho(o,a))):s(e,["functionDeclarations"],n)),r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");r(t,["googleSearch"])!=null&&s(e,["googleSearch"],go());const l=r(t,["googleSearchRetrieval"]);l!=null&&s(e,["googleSearchRetrieval"],Co(o,l));const u=r(t,["codeExecution"]);return u!=null&&s(e,["codeExecution"],u),e}function Eo(o,t){const e={},n=r(t,["mode"]);n!=null&&s(e,["mode"],n);const i=r(t,["allowedFunctionNames"]);return i!=null&&s(e,["allowedFunctionNames"],i),e}function vo(o,t){const e={},n=r(t,["functionCallingConfig"]);return n!=null&&s(e,["functionCallingConfig"],Eo(o,n)),e}function To(o,t){const e={},n=r(t,["voiceName"]);return n!=null&&s(e,["voiceName"],n),e}function Io(o,t){const e={},n=r(t,["prebuiltVoiceConfig"]);return n!=null&&s(e,["prebuiltVoiceConfig"],To(o,n)),e}function _o(o,t){const e={},n=r(t,["voiceConfig"]);return n!=null&&s(e,["voiceConfig"],Io(o,n)),e}function Ao(o,t){const e={},n=r(t,["includeThoughts"]);return n!=null&&s(e,["includeThoughts"],n),e}function So(o,t,e){const n={},i=r(t,["systemInstruction"]);e!==void 0&&i!=null&&s(e,["systemInstruction"],ce(o,L(o,i)));const l=r(t,["temperature"]);l!=null&&s(n,["temperature"],l);const u=r(t,["topP"]);u!=null&&s(n,["topP"],u);const a=r(t,["topK"]);a!=null&&s(n,["topK"],a);const c=r(t,["candidateCount"]);c!=null&&s(n,["candidateCount"],c);const d=r(t,["maxOutputTokens"]);d!=null&&s(n,["maxOutputTokens"],d);const f=r(t,["stopSequences"]);f!=null&&s(n,["stopSequences"],f);const p=r(t,["responseLogprobs"]);p!=null&&s(n,["responseLogprobs"],p);const h=r(t,["logprobs"]);h!=null&&s(n,["logprobs"],h);const m=r(t,["presencePenalty"]);m!=null&&s(n,["presencePenalty"],m);const g=r(t,["frequencyPenalty"]);g!=null&&s(n,["frequencyPenalty"],g);const y=r(t,["seed"]);y!=null&&s(n,["seed"],y);const C=r(t,["responseMimeType"]);C!=null&&s(n,["responseMimeType"],C);const T=r(t,["responseSchema"]);if(T!=null&&s(n,["responseSchema"],po(o,Lt(o,T))),r(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");const E=r(t,["safetySettings"]);e!==void 0&&E!=null&&(Array.isArray(E)?s(e,["safetySettings"],E.map(ee=>mo(o,ee))):s(e,["safetySettings"],E));const I=r(t,["tools"]);e!==void 0&&I!=null&&(Array.isArray(I)?s(e,["tools"],te(o,te(o,I).map(ee=>kt(o,Vt(o,ee))))):s(e,["tools"],te(o,I)));const x=r(t,["toolConfig"]);if(e!==void 0&&x!=null&&s(e,["toolConfig"],vo(o,x)),r(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const V=r(t,["cachedContent"]);e!==void 0&&V!=null&&s(e,["cachedContent"],W(o,V));const F=r(t,["responseModalities"]);F!=null&&s(n,["responseModalities"],F);const q=r(t,["mediaResolution"]);q!=null&&s(n,["mediaResolution"],q);const U=r(t,["speechConfig"]);if(U!=null&&s(n,["speechConfig"],_o(o,Dt(o,U))),r(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ne=r(t,["thinkingConfig"]);return ne!=null&&s(n,["thinkingConfig"],Ao(o,ne)),n}function yt(o,t){const e={},n=r(t,["model"]);n!=null&&s(e,["_url","model"],w(o,n));const i=r(t,["contents"]);i!=null&&(Array.isArray(i)?s(e,["contents"],A(o,A(o,i).map(u=>ce(o,u)))):s(e,["contents"],A(o,i)));const l=r(t,["config"]);return l!=null&&s(e,["generationConfig"],So(o,l,e)),e}function Mo(o,t,e){const n={},i=r(t,["taskType"]);e!==void 0&&i!=null&&s(e,["requests[]","taskType"],i);const l=r(t,["title"]);e!==void 0&&l!=null&&s(e,["requests[]","title"],l);const u=r(t,["outputDimensionality"]);if(e!==void 0&&u!=null&&s(e,["requests[]","outputDimensionality"],u),r(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(r(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Ro(o,t){const e={},n=r(t,["model"]);n!=null&&s(e,["_url","model"],w(o,n));const i=r(t,["contents"]);i!=null&&s(e,["requests[]","content"],Nt(o,i));const l=r(t,["config"]);l!=null&&s(e,["config"],Mo(o,l,e));const u=r(t,["model"]);return u!==void 0&&s(e,["requests[]","model"],w(o,u)),e}function Po(o,t,e){const n={};if(r(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(r(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=r(t,["numberOfImages"]);e!==void 0&&i!=null&&s(e,["parameters","sampleCount"],i);const l=r(t,["aspectRatio"]);e!==void 0&&l!=null&&s(e,["parameters","aspectRatio"],l);const u=r(t,["guidanceScale"]);if(e!==void 0&&u!=null&&s(e,["parameters","guidanceScale"],u),r(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=r(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&s(e,["parameters","safetySetting"],a);const c=r(t,["personGeneration"]);e!==void 0&&c!=null&&s(e,["parameters","personGeneration"],c);const d=r(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&s(e,["parameters","includeSafetyAttributes"],d);const f=r(t,["includeRaiReason"]);e!==void 0&&f!=null&&s(e,["parameters","includeRaiReason"],f);const p=r(t,["language"]);e!==void 0&&p!=null&&s(e,["parameters","language"],p);const h=r(t,["outputMimeType"]);e!==void 0&&h!=null&&s(e,["parameters","outputOptions","mimeType"],h);const m=r(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&s(e,["parameters","outputOptions","compressionQuality"],m),r(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(r(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function wo(o,t){const e={},n=r(t,["model"]);n!=null&&s(e,["_url","model"],w(o,n));const i=r(t,["prompt"]);i!=null&&s(e,["instances[0]","prompt"],i);const l=r(t,["config"]);return l!=null&&s(e,["config"],Po(o,l,e)),e}function xo(o,t){const e={};if(r(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(r(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(r(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function No(o,t){const e={},n=r(t,["model"]);n!=null&&s(e,["_url","model"],w(o,n));const i=r(t,["contents"]);i!=null&&(Array.isArray(i)?s(e,["contents"],A(o,A(o,i).map(u=>ce(o,u)))):s(e,["contents"],A(o,i)));const l=r(t,["config"]);return l!=null&&s(e,["config"],xo(o,l)),e}function Lo(o,t){const e={};if(r(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=r(t,["imageBytes"]);n!=null&&s(e,["bytesBase64Encoded"],z(o,n));const i=r(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function Do(o,t,e){const n={},i=r(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&s(e,["parameters","sampleCount"],i),r(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(r(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const l=r(t,["durationSeconds"]);if(e!==void 0&&l!=null&&s(e,["parameters","durationSeconds"],l),r(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=r(t,["aspectRatio"]);if(e!==void 0&&u!=null&&s(e,["parameters","aspectRatio"],u),r(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const a=r(t,["personGeneration"]);if(e!==void 0&&a!=null&&s(e,["parameters","personGeneration"],a),r(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=r(t,["negativePrompt"]);if(e!==void 0&&c!=null&&s(e,["parameters","negativePrompt"],c),r(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Vo(o,t){const e={},n=r(t,["model"]);n!=null&&s(e,["_url","model"],w(o,n));const i=r(t,["prompt"]);i!=null&&s(e,["instances[0]","prompt"],i);const l=r(t,["image"]);l!=null&&s(e,["instances[0]","image"],Lo(o,l));const u=r(t,["config"]);return u!=null&&s(e,["config"],Do(o,u,e)),e}function Fo(o,t){const e={},n=r(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],n);const i=r(t,["thought"]);i!=null&&s(e,["thought"],i);const l=r(t,["codeExecutionResult"]);l!=null&&s(e,["codeExecutionResult"],l);const u=r(t,["executableCode"]);u!=null&&s(e,["executableCode"],u);const a=r(t,["fileData"]);a!=null&&s(e,["fileData"],a);const c=r(t,["functionCall"]);c!=null&&s(e,["functionCall"],c);const d=r(t,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const f=r(t,["inlineData"]);f!=null&&s(e,["inlineData"],f);const p=r(t,["text"]);return p!=null&&s(e,["text"],p),e}function j(o,t){const e={},n=r(t,["parts"]);n!=null&&(Array.isArray(n)?s(e,["parts"],n.map(l=>Fo(o,l))):s(e,["parts"],n));const i=r(t,["role"]);return i!=null&&s(e,["role"],i),e}function Ht(o,t){const e={},n=r(t,["example"]);n!=null&&s(e,["example"],n);const i=r(t,["pattern"]);i!=null&&s(e,["pattern"],i);const l=r(t,["default"]);l!=null&&s(e,["default"],l);const u=r(t,["maxLength"]);u!=null&&s(e,["maxLength"],u);const a=r(t,["minLength"]);a!=null&&s(e,["minLength"],a);const c=r(t,["minProperties"]);c!=null&&s(e,["minProperties"],c);const d=r(t,["maxProperties"]);d!=null&&s(e,["maxProperties"],d);const f=r(t,["anyOf"]);f!=null&&s(e,["anyOf"],f);const p=r(t,["description"]);p!=null&&s(e,["description"],p);const h=r(t,["enum"]);h!=null&&s(e,["enum"],h);const m=r(t,["format"]);m!=null&&s(e,["format"],m);const g=r(t,["items"]);g!=null&&s(e,["items"],g);const y=r(t,["maxItems"]);y!=null&&s(e,["maxItems"],y);const C=r(t,["maximum"]);C!=null&&s(e,["maximum"],C);const T=r(t,["minItems"]);T!=null&&s(e,["minItems"],T);const E=r(t,["minimum"]);E!=null&&s(e,["minimum"],E);const I=r(t,["nullable"]);I!=null&&s(e,["nullable"],I);const x=r(t,["properties"]);x!=null&&s(e,["properties"],x);const V=r(t,["propertyOrdering"]);V!=null&&s(e,["propertyOrdering"],V);const F=r(t,["required"]);F!=null&&s(e,["required"],F);const q=r(t,["title"]);q!=null&&s(e,["title"],q);const U=r(t,["type"]);return U!=null&&s(e,["type"],U),e}function qo(o,t){const e={},n=r(t,["method"]);n!=null&&s(e,["method"],n);const i=r(t,["category"]);i!=null&&s(e,["category"],i);const l=r(t,["threshold"]);return l!=null&&s(e,["threshold"],l),e}function Uo(o,t){const e={},n=r(t,["response"]);n!=null&&s(e,["response"],Ht(o,n));const i=r(t,["description"]);i!=null&&s(e,["description"],i);const l=r(t,["name"]);l!=null&&s(e,["name"],l);const u=r(t,["parameters"]);return u!=null&&s(e,["parameters"],u),e}function Go(){return{}}function ko(o,t){const e={},n=r(t,["mode"]);n!=null&&s(e,["mode"],n);const i=r(t,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function Ho(o,t){const e={},n=r(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],ko(o,n)),e}function Ve(o,t){const e={},n=r(t,["functionDeclarations"]);n!=null&&(Array.isArray(n)?s(e,["functionDeclarations"],n.map(c=>Uo(o,c))):s(e,["functionDeclarations"],n));const i=r(t,["retrieval"]);i!=null&&s(e,["retrieval"],i),r(t,["googleSearch"])!=null&&s(e,["googleSearch"],Go());const u=r(t,["googleSearchRetrieval"]);u!=null&&s(e,["googleSearchRetrieval"],Ho(o,u));const a=r(t,["codeExecution"]);return a!=null&&s(e,["codeExecution"],a),e}function $o(o,t){const e={},n=r(t,["mode"]);n!=null&&s(e,["mode"],n);const i=r(t,["allowedFunctionNames"]);return i!=null&&s(e,["allowedFunctionNames"],i),e}function Bo(o,t){const e={},n=r(t,["functionCallingConfig"]);return n!=null&&s(e,["functionCallingConfig"],$o(o,n)),e}function Oo(o,t){const e={},n=r(t,["voiceName"]);return n!=null&&s(e,["voiceName"],n),e}function Yo(o,t){const e={},n=r(t,["prebuiltVoiceConfig"]);return n!=null&&s(e,["prebuiltVoiceConfig"],Oo(o,n)),e}function Ko(o,t){const e={},n=r(t,["voiceConfig"]);return n!=null&&s(e,["voiceConfig"],Yo(o,n)),e}function Jo(o,t){const e={},n=r(t,["includeThoughts"]);return n!=null&&s(e,["includeThoughts"],n),e}function Wo(o,t,e){const n={},i=r(t,["systemInstruction"]);e!==void 0&&i!=null&&s(e,["systemInstruction"],j(o,L(o,i)));const l=r(t,["temperature"]);l!=null&&s(n,["temperature"],l);const u=r(t,["topP"]);u!=null&&s(n,["topP"],u);const a=r(t,["topK"]);a!=null&&s(n,["topK"],a);const c=r(t,["candidateCount"]);c!=null&&s(n,["candidateCount"],c);const d=r(t,["maxOutputTokens"]);d!=null&&s(n,["maxOutputTokens"],d);const f=r(t,["stopSequences"]);f!=null&&s(n,["stopSequences"],f);const p=r(t,["responseLogprobs"]);p!=null&&s(n,["responseLogprobs"],p);const h=r(t,["logprobs"]);h!=null&&s(n,["logprobs"],h);const m=r(t,["presencePenalty"]);m!=null&&s(n,["presencePenalty"],m);const g=r(t,["frequencyPenalty"]);g!=null&&s(n,["frequencyPenalty"],g);const y=r(t,["seed"]);y!=null&&s(n,["seed"],y);const C=r(t,["responseMimeType"]);C!=null&&s(n,["responseMimeType"],C);const T=r(t,["responseSchema"]);T!=null&&s(n,["responseSchema"],Ht(o,Lt(o,T)));const E=r(t,["routingConfig"]);E!=null&&s(n,["routingConfig"],E);const I=r(t,["safetySettings"]);e!==void 0&&I!=null&&(Array.isArray(I)?s(e,["safetySettings"],I.map(Me=>qo(o,Me))):s(e,["safetySettings"],I));const x=r(t,["tools"]);e!==void 0&&x!=null&&(Array.isArray(x)?s(e,["tools"],te(o,te(o,x).map(Me=>Ve(o,Vt(o,Me))))):s(e,["tools"],te(o,x)));const V=r(t,["toolConfig"]);e!==void 0&&V!=null&&s(e,["toolConfig"],Bo(o,V));const F=r(t,["labels"]);e!==void 0&&F!=null&&s(e,["labels"],F);const q=r(t,["cachedContent"]);e!==void 0&&q!=null&&s(e,["cachedContent"],W(o,q));const U=r(t,["responseModalities"]);U!=null&&s(n,["responseModalities"],U);const ne=r(t,["mediaResolution"]);ne!=null&&s(n,["mediaResolution"],ne);const ee=r(t,["speechConfig"]);ee!=null&&s(n,["speechConfig"],Ko(o,Dt(o,ee)));const qe=r(t,["audioTimestamp"]);qe!=null&&s(n,["audioTimestamp"],qe);const Ue=r(t,["thinkingConfig"]);return Ue!=null&&s(n,["thinkingConfig"],Jo(o,Ue)),n}function Ct(o,t){const e={},n=r(t,["model"]);n!=null&&s(e,["_url","model"],w(o,n));const i=r(t,["contents"]);i!=null&&(Array.isArray(i)?s(e,["contents"],A(o,A(o,i).map(u=>j(o,u)))):s(e,["contents"],A(o,i)));const l=r(t,["config"]);return l!=null&&s(e,["generationConfig"],Wo(o,l,e)),e}function zo(o,t,e){const n={},i=r(t,["taskType"]);e!==void 0&&i!=null&&s(e,["instances[]","task_type"],i);const l=r(t,["title"]);e!==void 0&&l!=null&&s(e,["instances[]","title"],l);const u=r(t,["outputDimensionality"]);e!==void 0&&u!=null&&s(e,["parameters","outputDimensionality"],u);const a=r(t,["mimeType"]);e!==void 0&&a!=null&&s(e,["instances[]","mimeType"],a);const c=r(t,["autoTruncate"]);return e!==void 0&&c!=null&&s(e,["parameters","autoTruncate"],c),n}function bo(o,t){const e={},n=r(t,["model"]);n!=null&&s(e,["_url","model"],w(o,n));const i=r(t,["contents"]);i!=null&&s(e,["instances[]","content"],Nt(o,i));const l=r(t,["config"]);return l!=null&&s(e,["config"],zo(o,l,e)),e}function Xo(o,t,e){const n={},i=r(t,["outputGcsUri"]);e!==void 0&&i!=null&&s(e,["parameters","storageUri"],i);const l=r(t,["negativePrompt"]);e!==void 0&&l!=null&&s(e,["parameters","negativePrompt"],l);const u=r(t,["numberOfImages"]);e!==void 0&&u!=null&&s(e,["parameters","sampleCount"],u);const a=r(t,["aspectRatio"]);e!==void 0&&a!=null&&s(e,["parameters","aspectRatio"],a);const c=r(t,["guidanceScale"]);e!==void 0&&c!=null&&s(e,["parameters","guidanceScale"],c);const d=r(t,["seed"]);e!==void 0&&d!=null&&s(e,["parameters","seed"],d);const f=r(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&s(e,["parameters","safetySetting"],f);const p=r(t,["personGeneration"]);e!==void 0&&p!=null&&s(e,["parameters","personGeneration"],p);const h=r(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&s(e,["parameters","includeSafetyAttributes"],h);const m=r(t,["includeRaiReason"]);e!==void 0&&m!=null&&s(e,["parameters","includeRaiReason"],m);const g=r(t,["language"]);e!==void 0&&g!=null&&s(e,["parameters","language"],g);const y=r(t,["outputMimeType"]);e!==void 0&&y!=null&&s(e,["parameters","outputOptions","mimeType"],y);const C=r(t,["outputCompressionQuality"]);e!==void 0&&C!=null&&s(e,["parameters","outputOptions","compressionQuality"],C);const T=r(t,["addWatermark"]);e!==void 0&&T!=null&&s(e,["parameters","addWatermark"],T);const E=r(t,["enhancePrompt"]);return e!==void 0&&E!=null&&s(e,["parameters","enhancePrompt"],E),n}function Qo(o,t){const e={},n=r(t,["model"]);n!=null&&s(e,["_url","model"],w(o,n));const i=r(t,["prompt"]);i!=null&&s(e,["instances[0]","prompt"],i);const l=r(t,["config"]);return l!=null&&s(e,["config"],Xo(o,l,e)),e}function Zo(o,t,e){const n={},i=r(t,["systemInstruction"]);e!==void 0&&i!=null&&s(e,["systemInstruction"],j(o,L(o,i)));const l=r(t,["tools"]);e!==void 0&&l!=null&&(Array.isArray(l)?s(e,["tools"],l.map(a=>Ve(o,a))):s(e,["tools"],l));const u=r(t,["generationConfig"]);return e!==void 0&&u!=null&&s(e,["generationConfig"],u),n}function jo(o,t){const e={},n=r(t,["model"]);n!=null&&s(e,["_url","model"],w(o,n));const i=r(t,["contents"]);i!=null&&(Array.isArray(i)?s(e,["contents"],A(o,A(o,i).map(u=>j(o,u)))):s(e,["contents"],A(o,i)));const l=r(t,["config"]);return l!=null&&s(e,["config"],Zo(o,l,e)),e}function ei(o,t){const e={},n=r(t,["model"]);n!=null&&s(e,["_url","model"],w(o,n));const i=r(t,["contents"]);i!=null&&(Array.isArray(i)?s(e,["contents"],A(o,A(o,i).map(u=>j(o,u)))):s(e,["contents"],A(o,i)));const l=r(t,["config"]);return l!=null&&s(e,["config"],l),e}function ti(o,t){const e={},n=r(t,["gcsUri"]);n!=null&&s(e,["gcsUri"],n);const i=r(t,["imageBytes"]);i!=null&&s(e,["bytesBase64Encoded"],z(o,i));const l=r(t,["mimeType"]);return l!=null&&s(e,["mimeType"],l),e}function ni(o,t,e){const n={},i=r(t,["numberOfVideos"]);e!==void 0&&i!=null&&s(e,["parameters","sampleCount"],i);const l=r(t,["outputGcsUri"]);e!==void 0&&l!=null&&s(e,["parameters","storageUri"],l);const u=r(t,["fps"]);e!==void 0&&u!=null&&s(e,["parameters","fps"],u);const a=r(t,["durationSeconds"]);e!==void 0&&a!=null&&s(e,["parameters","durationSeconds"],a);const c=r(t,["seed"]);e!==void 0&&c!=null&&s(e,["parameters","seed"],c);const d=r(t,["aspectRatio"]);e!==void 0&&d!=null&&s(e,["parameters","aspectRatio"],d);const f=r(t,["resolution"]);e!==void 0&&f!=null&&s(e,["parameters","resolution"],f);const p=r(t,["personGeneration"]);e!==void 0&&p!=null&&s(e,["parameters","personGeneration"],p);const h=r(t,["pubsubTopic"]);e!==void 0&&h!=null&&s(e,["parameters","pubsubTopic"],h);const m=r(t,["negativePrompt"]);e!==void 0&&m!=null&&s(e,["parameters","negativePrompt"],m);const g=r(t,["enhancePrompt"]);return e!==void 0&&g!=null&&s(e,["parameters","enhancePrompt"],g),n}function oi(o,t){const e={},n=r(t,["model"]);n!=null&&s(e,["_url","model"],w(o,n));const i=r(t,["prompt"]);i!=null&&s(e,["instances[0]","prompt"],i);const l=r(t,["image"]);l!=null&&s(e,["instances[0]","image"],ti(o,l));const u=r(t,["config"]);return u!=null&&s(e,["config"],ni(o,u,e)),e}function ii(o,t){const e={},n=r(t,["thought"]);n!=null&&s(e,["thought"],n);const i=r(t,["codeExecutionResult"]);i!=null&&s(e,["codeExecutionResult"],i);const l=r(t,["executableCode"]);l!=null&&s(e,["executableCode"],l);const u=r(t,["fileData"]);u!=null&&s(e,["fileData"],u);const a=r(t,["functionCall"]);a!=null&&s(e,["functionCall"],a);const c=r(t,["functionResponse"]);c!=null&&s(e,["functionResponse"],c);const d=r(t,["inlineData"]);d!=null&&s(e,["inlineData"],d);const f=r(t,["text"]);return f!=null&&s(e,["text"],f),e}function $t(o,t){const e={},n=r(t,["parts"]);n!=null&&(Array.isArray(n)?s(e,["parts"],n.map(l=>ii(o,l))):s(e,["parts"],n));const i=r(t,["role"]);return i!=null&&s(e,["role"],i),e}function si(o,t){const e={},n=r(t,["citationSources"]);return n!=null&&s(e,["citations"],n),e}function ri(o,t){const e={},n=r(t,["content"]);n!=null&&s(e,["content"],$t(o,n));const i=r(t,["citationMetadata"]);i!=null&&s(e,["citationMetadata"],si(o,i));const l=r(t,["tokenCount"]);l!=null&&s(e,["tokenCount"],l);const u=r(t,["finishReason"]);u!=null&&s(e,["finishReason"],u);const a=r(t,["avgLogprobs"]);a!=null&&s(e,["avgLogprobs"],a);const c=r(t,["groundingMetadata"]);c!=null&&s(e,["groundingMetadata"],c);const d=r(t,["index"]);d!=null&&s(e,["index"],d);const f=r(t,["logprobsResult"]);f!=null&&s(e,["logprobsResult"],f);const p=r(t,["safetyRatings"]);return p!=null&&s(e,["safetyRatings"],p),e}function Et(o,t){const e={},n=r(t,["candidates"]);n!=null&&(Array.isArray(n)?s(e,["candidates"],n.map(a=>ri(o,a))):s(e,["candidates"],n));const i=r(t,["modelVersion"]);i!=null&&s(e,["modelVersion"],i);const l=r(t,["promptFeedback"]);l!=null&&s(e,["promptFeedback"],l);const u=r(t,["usageMetadata"]);return u!=null&&s(e,["usageMetadata"],u),e}function li(o,t){const e={},n=r(t,["values"]);return n!=null&&s(e,["values"],n),e}function ai(){return{}}function ui(o,t){const e={},n=r(t,["embeddings"]);return n!=null&&(Array.isArray(n)?s(e,["embeddings"],n.map(l=>li(o,l))):s(e,["embeddings"],n)),r(t,["metadata"])!=null&&s(e,["metadata"],ai()),e}function ci(o,t){const e={},n=r(t,["bytesBase64Encoded"]);n!=null&&s(e,["imageBytes"],z(o,n));const i=r(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function Bt(o,t){const e={},n=r(t,["safetyAttributes","categories"]);n!=null&&s(e,["categories"],n);const i=r(t,["safetyAttributes","scores"]);i!=null&&s(e,["scores"],i);const l=r(t,["contentType"]);return l!=null&&s(e,["contentType"],l),e}function di(o,t){const e={},n=r(t,["_self"]);n!=null&&s(e,["image"],ci(o,n));const i=r(t,["raiFilteredReason"]);i!=null&&s(e,["raiFilteredReason"],i);const l=r(t,["_self"]);return l!=null&&s(e,["safetyAttributes"],Bt(o,l)),e}function fi(o,t){const e={},n=r(t,["predictions"]);n!=null&&(Array.isArray(n)?s(e,["generatedImages"],n.map(l=>di(o,l))):s(e,["generatedImages"],n));const i=r(t,["positivePromptSafetyAttributes"]);return i!=null&&s(e,["positivePromptSafetyAttributes"],Bt(o,i)),e}function pi(o,t){const e={},n=r(t,["totalTokens"]);n!=null&&s(e,["totalTokens"],n);const i=r(t,["cachedContentTokenCount"]);return i!=null&&s(e,["cachedContentTokenCount"],i),e}function mi(o,t){const e={},n=r(t,["video","uri"]);n!=null&&s(e,["uri"],n);const i=r(t,["video","encodedVideo"]);i!=null&&s(e,["videoBytes"],z(o,i));const l=r(t,["encoding"]);return l!=null&&s(e,["mimeType"],l),e}function hi(o,t){const e={},n=r(t,["_self"]);return n!=null&&s(e,["video"],mi(o,n)),e}function gi(o,t){const e={},n=r(t,["generatedSamples"]);n!=null&&(Array.isArray(n)?s(e,["generatedVideos"],n.map(u=>hi(o,u))):s(e,["generatedVideos"],n));const i=r(t,["raiMediaFilteredCount"]);i!=null&&s(e,["raiMediaFilteredCount"],i);const l=r(t,["raiMediaFilteredReasons"]);return l!=null&&s(e,["raiMediaFilteredReasons"],l),e}function yi(o,t){const e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);const i=r(t,["metadata"]);i!=null&&s(e,["metadata"],i);const l=r(t,["done"]);l!=null&&s(e,["done"],l);const u=r(t,["error"]);u!=null&&s(e,["error"],u);const a=r(t,["response"]);a!=null&&s(e,["response"],a);const c=r(t,["response","generateVideoResponse"]);return c!=null&&s(e,["result"],gi(o,c)),e}function Ci(o,t){const e={},n=r(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],n);const i=r(t,["thought"]);i!=null&&s(e,["thought"],i);const l=r(t,["codeExecutionResult"]);l!=null&&s(e,["codeExecutionResult"],l);const u=r(t,["executableCode"]);u!=null&&s(e,["executableCode"],u);const a=r(t,["fileData"]);a!=null&&s(e,["fileData"],a);const c=r(t,["functionCall"]);c!=null&&s(e,["functionCall"],c);const d=r(t,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const f=r(t,["inlineData"]);f!=null&&s(e,["inlineData"],f);const p=r(t,["text"]);return p!=null&&s(e,["text"],p),e}function Ot(o,t){const e={},n=r(t,["parts"]);n!=null&&(Array.isArray(n)?s(e,["parts"],n.map(l=>Ci(o,l))):s(e,["parts"],n));const i=r(t,["role"]);return i!=null&&s(e,["role"],i),e}function Ei(o,t){const e={},n=r(t,["citations"]);return n!=null&&s(e,["citations"],n),e}function vi(o,t){const e={},n=r(t,["content"]);n!=null&&s(e,["content"],Ot(o,n));const i=r(t,["citationMetadata"]);i!=null&&s(e,["citationMetadata"],Ei(o,i));const l=r(t,["finishMessage"]);l!=null&&s(e,["finishMessage"],l);const u=r(t,["finishReason"]);u!=null&&s(e,["finishReason"],u);const a=r(t,["avgLogprobs"]);a!=null&&s(e,["avgLogprobs"],a);const c=r(t,["groundingMetadata"]);c!=null&&s(e,["groundingMetadata"],c);const d=r(t,["index"]);d!=null&&s(e,["index"],d);const f=r(t,["logprobsResult"]);f!=null&&s(e,["logprobsResult"],f);const p=r(t,["safetyRatings"]);return p!=null&&s(e,["safetyRatings"],p),e}function vt(o,t){const e={},n=r(t,["candidates"]);n!=null&&(Array.isArray(n)?s(e,["candidates"],n.map(d=>vi(o,d))):s(e,["candidates"],n));const i=r(t,["createTime"]);i!=null&&s(e,["createTime"],i);const l=r(t,["responseId"]);l!=null&&s(e,["responseId"],l);const u=r(t,["modelVersion"]);u!=null&&s(e,["modelVersion"],u);const a=r(t,["promptFeedback"]);a!=null&&s(e,["promptFeedback"],a);const c=r(t,["usageMetadata"]);return c!=null&&s(e,["usageMetadata"],c),e}function Ti(o,t){const e={},n=r(t,["truncated"]);n!=null&&s(e,["truncated"],n);const i=r(t,["token_count"]);return i!=null&&s(e,["tokenCount"],i),e}function Ii(o,t){const e={},n=r(t,["values"]);n!=null&&s(e,["values"],n);const i=r(t,["statistics"]);return i!=null&&s(e,["statistics"],Ti(o,i)),e}function _i(o,t){const e={},n=r(t,["billableCharacterCount"]);return n!=null&&s(e,["billableCharacterCount"],n),e}function Ai(o,t){const e={},n=r(t,["predictions[]","embeddings"]);n!=null&&(Array.isArray(n)?s(e,["embeddings"],n.map(l=>Ii(o,l))):s(e,["embeddings"],n));const i=r(t,["metadata"]);return i!=null&&s(e,["metadata"],_i(o,i)),e}function Si(o,t){const e={},n=r(t,["gcsUri"]);n!=null&&s(e,["gcsUri"],n);const i=r(t,["bytesBase64Encoded"]);i!=null&&s(e,["imageBytes"],z(o,i));const l=r(t,["mimeType"]);return l!=null&&s(e,["mimeType"],l),e}function Yt(o,t){const e={},n=r(t,["safetyAttributes","categories"]);n!=null&&s(e,["categories"],n);const i=r(t,["safetyAttributes","scores"]);i!=null&&s(e,["scores"],i);const l=r(t,["contentType"]);return l!=null&&s(e,["contentType"],l),e}function Mi(o,t){const e={},n=r(t,["_self"]);n!=null&&s(e,["image"],Si(o,n));const i=r(t,["raiFilteredReason"]);i!=null&&s(e,["raiFilteredReason"],i);const l=r(t,["_self"]);l!=null&&s(e,["safetyAttributes"],Yt(o,l));const u=r(t,["prompt"]);return u!=null&&s(e,["enhancedPrompt"],u),e}function Ri(o,t){const e={},n=r(t,["predictions"]);n!=null&&(Array.isArray(n)?s(e,["generatedImages"],n.map(l=>Mi(o,l))):s(e,["generatedImages"],n));const i=r(t,["positivePromptSafetyAttributes"]);return i!=null&&s(e,["positivePromptSafetyAttributes"],Yt(o,i)),e}function Pi(o,t){const e={},n=r(t,["totalTokens"]);return n!=null&&s(e,["totalTokens"],n),e}function wi(o,t){const e={},n=r(t,["tokensInfo"]);return n!=null&&s(e,["tokensInfo"],n),e}function xi(o,t){const e={},n=r(t,["gcsUri"]);n!=null&&s(e,["uri"],n);const i=r(t,["bytesBase64Encoded"]);i!=null&&s(e,["videoBytes"],z(o,i));const l=r(t,["mimeType"]);return l!=null&&s(e,["mimeType"],l),e}function Ni(o,t){const e={},n=r(t,["_self"]);return n!=null&&s(e,["video"],xi(o,n)),e}function Li(o,t){const e={},n=r(t,["videos"]);n!=null&&(Array.isArray(n)?s(e,["generatedVideos"],n.map(u=>Ni(o,u))):s(e,["generatedVideos"],n));const i=r(t,["raiMediaFilteredCount"]);i!=null&&s(e,["raiMediaFilteredCount"],i);const l=r(t,["raiMediaFilteredReasons"]);return l!=null&&s(e,["raiMediaFilteredReasons"],l),e}function Di(o,t){const e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);const i=r(t,["metadata"]);i!=null&&s(e,["metadata"],i);const l=r(t,["done"]);l!=null&&s(e,["done"],l);const u=r(t,["error"]);u!=null&&s(e,["error"],u);const a=r(t,["response"]);a!=null&&s(e,["response"],a);const c=r(t,["response"]);return c!=null&&s(e,["result"],Li(o,c)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Vi(o,t){const e={},n=r(t,["config"]);n!=null&&s(e,["setup"],Gi(o,n));const i=r(t,["model"]);return i!==void 0&&s(e,["setup","model"],i),e}function Fi(o,t){const e={},n=r(t,["config"]);n!=null&&s(e,["setup"],ki(o,n));const i=r(t,["model"]);return i!==void 0&&s(e,["setup","model"],i),e}function qi(o,t){const e={},n=r(t,["setupComplete"]);n!==void 0&&s(e,["setupComplete"],n);const i=r(t,["serverContent"]);i!=null&&s(e,["serverContent"],Hi(o,i));const l=r(t,["toolCall"]);l!=null&&s(e,["toolCall"],Yi(o,l));const u=r(t,["toolCallCancellation"]);return u!=null&&s(e,["toolCallCancellation"],Ji(o,u)),e}function Ui(o,t){const e={},n=r(t,["setupComplete"]);n!==void 0&&s(e,["setupComplete"],n);const i=r(t,["serverContent"]);i!=null&&s(e,["serverContent"],$i(o,i));const l=r(t,["toolCall"]);l!=null&&s(e,["toolCall"],Ki(o,l));const u=r(t,["toolCallCancellation"]);return u!=null&&s(e,["toolCallCancellation"],Wi(o,u)),e}function Gi(o,t){const e={},n=r(t,["generationConfig"]);n!==void 0&&s(e,["generationConfig"],n);const i=r(t,["responseModalities"]);i!==void 0&&s(e,["generationConfig","responseModalities"],i);const l=r(t,["speechConfig"]);l!==void 0&&s(e,["generationConfig","speechConfig"],l);const u=r(t,["systemInstruction"]);u!=null&&s(e,["systemInstruction"],ce(o,u));const a=r(t,["tools"]);return a!=null&&Array.isArray(a)&&s(e,["tools"],a.map(c=>kt(o,c))),e}function ki(o,t){const e={},n=r(t,["generationConfig"]);n!==void 0&&s(e,["generationConfig"],n);const i=r(t,["responseModalities"]);i!==void 0?s(e,["generationConfig","responseModalities"],i):s(e,["generationConfig","responseModalities"],["AUDIO"]);const l=r(t,["speechConfig"]);l!==void 0&&s(e,["generationConfig","speechConfig"],l);const u=r(t,["systemInstruction"]);u!=null&&s(e,["systemInstruction"],j(o,u));const a=r(t,["tools"]);return a!=null&&Array.isArray(a)&&s(e,["tools"],a.map(c=>Ve(o,c))),e}function Hi(o,t){const e={},n=r(t,["modelTurn"]);n!=null&&s(e,["modelTurn"],$t(o,n));const i=r(t,["turnComplete"]);i!==void 0&&s(e,["turnComplete"],i);const l=r(t,["interrupted"]);return l!==void 0&&s(e,["interrupted"],l),e}function $i(o,t){const e={},n=r(t,["modelTurn"]);n!=null&&s(e,["modelTurn"],Ot(o,n));const i=r(t,["turnComplete"]);i!==void 0&&s(e,["turnComplete"],i);const l=r(t,["interrupted"]);return l!==void 0&&s(e,["interrupted"],l),e}function Bi(o,t){const e={},n=r(t,["id"]);n!==void 0&&s(e,["id"],n);const i=r(t,["args"]);i!==void 0&&s(e,["args"],i);const l=r(t,["name"]);return l!==void 0&&s(e,["name"],l),e}function Oi(o,t){const e={},n=r(t,["args"]);n!==void 0&&s(e,["args"],n);const i=r(t,["name"]);return i!==void 0&&s(e,["name"],i),e}function Yi(o,t){const e={},n=r(t,["functionCalls"]);return n!=null&&Array.isArray(n)&&s(e,["functionCalls"],n.map(i=>Bi(o,i))),e}function Ki(o,t){const e={},n=r(t,["functionCalls"]);return n!=null&&Array.isArray(n)&&s(e,["functionCalls"],n.map(i=>Oi(o,i))),e}function Ji(o,t){const e={},n=r(t,["ids"]);return n!==void 0&&s(e,["ids"],n),e}function Wi(o,t){const e={},n=r(t,["ids"]);return n!==void 0&&s(e,["ids"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zi="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function bi(o,t,e){let n,i;e.data instanceof Blob?i=JSON.parse(await e.data.text()):i=JSON.parse(e.data),o.isVertexAI()?n=Ui(o,i):n=qi(o,i),t(n)}class Xi{constructor(t,e,n){this.apiClient=t,this.auth=e,this.webSocketFactory=n}async connect(t){var e,n;const i=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion();let u;const a=es(this.apiClient.getDefaultHeaders());if(this.apiClient.isVertexAI())u=`${i}/ws/google.cloud.aiplatform.${l}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(a);else{const E=this.apiClient.getApiKey();u=`${i}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateContent?key=${E}`}let c=()=>{};const d=new Promise(E=>{c=E}),f=t.callbacks,p=function(){var E;(E=f==null?void 0:f.onopen)===null||E===void 0||E.call(f),c({})},h=this.apiClient,m={onopen:p,onmessage:E=>{bi(h,f.onmessage,E)},onerror:(e=f==null?void 0:f.onerror)!==null&&e!==void 0?e:function(E){},onclose:(n=f==null?void 0:f.onclose)!==null&&n!==void 0?n:function(E){}},g=this.webSocketFactory.create(u,ji(a),m);g.connect(),await d;let y=w(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&y.startsWith("publishers/")){const E=this.apiClient.getProject(),I=this.apiClient.getLocation();y=`projects/${E}/locations/${I}/`+y}let C={};const T={model:y,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?C=Fi(this.apiClient,T):C=Vi(this.apiClient,T),g.send(JSON.stringify(C)),new Zi(g,this.apiClient)}}const Qi={turnComplete:!0};class Zi{constructor(t,e){this.conn=t,this.apiClient=e}tLiveClientContent(t,e){if(e.turns!==null&&e.turns!==void 0){let n=[];try{n=A(t,e.turns),t.isVertexAI()?n=n.map(i=>j(t,i)):n=n.map(i=>ce(t,i))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof e.turns}'`)}return{clientContent:{turns:n,turnComplete:e.turnComplete}}}return{clientContent:{turnComplete:e.turnComplete}}}tLiveClientRealtimeInput(t,e){let n={};if(!("media"in e)||!e.media)throw new Error(`Failed to convert realtime input "media", type: '${typeof e.media}'`);return n={realtimeInput:{mediaChunks:[e.media]}},n}tLiveClienttToolResponse(t,e){let n=[];if(e.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(e.functionResponses)?n=e.functionResponses:n=[e.functionResponses],n.length===0)throw new Error("functionResponses is required.");for(const l of n){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!t.isVertexAI()&&!("id"in l))throw new Error(zi)}return{toolResponse:{functionResponses:n}}}sendClientContent(t){t=Object.assign(Object.assign({},Qi),t);const e=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(e))}sendRealtimeInput(t){if(t.media==null)throw new Error("Media is required.");const e=this.tLiveClientRealtimeInput(this.apiClient,t);this.conn.send(JSON.stringify(e))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const e=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(e))}close(){this.conn.close()}}function ji(o){const t={};return o.forEach((e,n)=>{t[n]=e}),t}function es(o){const t=new Headers;for(const[e,n]of Object.entries(o))t.append(e,n);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ts extends _e{constructor(t){super(),this.apiClient=t,this.generateContent=async e=>await this.generateContentInternal(e),this.generateContentStream=async e=>await this.generateContentStreamInternal(e),this.generateImages=async e=>await this.generateImagesInternal(e).then(n=>{var i;let l;const u=[];if(n!=null&&n.generatedImages)for(const c of n.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((i=c==null?void 0:c.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?l=c==null?void 0:c.safetyAttributes:u.push(c);let a;return l?a={generatedImages:u,positivePromptSafetyAttributes:l}:a={generatedImages:u},a})}async generateContentInternal(t){var e,n;let i,l="",u={};if(this.apiClient.isVertexAI()){const a=Ct(this.apiClient,t);return l=v("{model}:generateContent",a._url),u=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions}).then(c=>c.json()),i.then(c=>{const d=vt(this.apiClient,c),f=new de;return Object.assign(f,d),f})}else{const a=yt(this.apiClient,t);return l=v("{model}:generateContent",a._url),u=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions}).then(c=>c.json()),i.then(c=>{const d=Et(this.apiClient,c),f=new de;return Object.assign(f,d),f})}}async generateContentStreamInternal(t){var e,n;let i,l="",u={};if(this.apiClient.isVertexAI()){const a=Ct(this.apiClient,t);l=v("{model}:streamGenerateContent?alt=sse",a._url),u=a._query,delete a.config,delete a._url,delete a._query;const c=this.apiClient;return i=c.requestStream({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions}),i.then(function(d){return Ee(this,arguments,function*(){var f,p,h,m;try{for(var g=!0,y=xe(d),C;C=yield P(y.next()),f=C.done,!f;g=!0){m=C.value,g=!1;const E=vt(c,m),I=new de;Object.assign(I,E),yield yield P(I)}}catch(T){p={error:T}}finally{try{!g&&!f&&(h=y.return)&&(yield P(h.call(y)))}finally{if(p)throw p.error}}})})}else{const a=yt(this.apiClient,t);l=v("{model}:streamGenerateContent?alt=sse",a._url),u=a._query,delete a.config,delete a._url,delete a._query;const c=this.apiClient;return i=c.requestStream({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions}),i.then(function(d){return Ee(this,arguments,function*(){var f,p,h,m;try{for(var g=!0,y=xe(d),C;C=yield P(y.next()),f=C.done,!f;g=!0){m=C.value,g=!1;const E=Et(c,m),I=new de;Object.assign(I,E),yield yield P(I)}}catch(T){p={error:T}}finally{try{!g&&!f&&(h=y.return)&&(yield P(h.call(y)))}finally{if(p)throw p.error}}})})}}async embedContent(t){var e,n;let i,l="",u={};if(this.apiClient.isVertexAI()){const a=bo(this.apiClient,t);return l=v("{model}:predict",a._url),u=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions}).then(c=>c.json()),i.then(c=>{const d=Ai(this.apiClient,c),f=new dt;return Object.assign(f,d),f})}else{const a=Ro(this.apiClient,t);return l=v("{model}:batchEmbedContents",a._url),u=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions}).then(c=>c.json()),i.then(c=>{const d=ui(this.apiClient,c),f=new dt;return Object.assign(f,d),f})}}async generateImagesInternal(t){var e,n;let i,l="",u={};if(this.apiClient.isVertexAI()){const a=Qo(this.apiClient,t);return l=v("{model}:predict",a._url),u=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions}).then(c=>c.json()),i.then(c=>{const d=Ri(this.apiClient,c),f=new ft;return Object.assign(f,d),f})}else{const a=wo(this.apiClient,t);return l=v("{model}:predict",a._url),u=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions}).then(c=>c.json()),i.then(c=>{const d=fi(this.apiClient,c),f=new ft;return Object.assign(f,d),f})}}async countTokens(t){var e,n;let i,l="",u={};if(this.apiClient.isVertexAI()){const a=jo(this.apiClient,t);return l=v("{model}:countTokens",a._url),u=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions}).then(c=>c.json()),i.then(c=>{const d=Pi(this.apiClient,c),f=new pt;return Object.assign(f,d),f})}else{const a=No(this.apiClient,t);return l=v("{model}:countTokens",a._url),u=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions}).then(c=>c.json()),i.then(c=>{const d=pi(this.apiClient,c),f=new pt;return Object.assign(f,d),f})}}async computeTokens(t){var e;let n,i="",l={};if(this.apiClient.isVertexAI()){const u=ei(this.apiClient,t);return i=v("{model}:computeTokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query,n=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions}).then(a=>a.json()),n.then(a=>{const c=wi(this.apiClient,a),d=new On;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(t){var e,n;let i,l="",u={};if(this.apiClient.isVertexAI()){const a=oi(this.apiClient,t);return l=v("{model}:predictLongRunning",a._url),u=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions}).then(c=>c.json()),i.then(c=>Di(this.apiClient,c))}else{const a=Vo(this.apiClient,t);return l=v("{model}:predictLongRunning",a._url),u=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions}).then(c=>c.json()),i.then(c=>yi(this.apiClient,c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ns(o,t){const e={},n=r(t,["operationName"]);n!=null&&s(e,["_url","operationName"],n);const i=r(t,["config"]);return i!=null&&s(e,["config"],i),e}function os(o,t){const e={},n=r(t,["operationName"]);n!=null&&s(e,["_url","operationName"],n);const i=r(t,["config"]);return i!=null&&s(e,["config"],i),e}function is(o,t){const e={},n=r(t,["operationName"]);n!=null&&s(e,["operationName"],n);const i=r(t,["resourceName"]);i!=null&&s(e,["_url","resourceName"],i);const l=r(t,["config"]);return l!=null&&s(e,["config"],l),e}function ss(o,t){const e={},n=r(t,["video","uri"]);n!=null&&s(e,["uri"],n);const i=r(t,["video","encodedVideo"]);i!=null&&s(e,["videoBytes"],z(o,i));const l=r(t,["encoding"]);return l!=null&&s(e,["mimeType"],l),e}function rs(o,t){const e={},n=r(t,["_self"]);return n!=null&&s(e,["video"],ss(o,n)),e}function ls(o,t){const e={},n=r(t,["generatedSamples"]);n!=null&&(Array.isArray(n)?s(e,["generatedVideos"],n.map(u=>rs(o,u))):s(e,["generatedVideos"],n));const i=r(t,["raiMediaFilteredCount"]);i!=null&&s(e,["raiMediaFilteredCount"],i);const l=r(t,["raiMediaFilteredReasons"]);return l!=null&&s(e,["raiMediaFilteredReasons"],l),e}function as(o,t){const e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);const i=r(t,["metadata"]);i!=null&&s(e,["metadata"],i);const l=r(t,["done"]);l!=null&&s(e,["done"],l);const u=r(t,["error"]);u!=null&&s(e,["error"],u);const a=r(t,["response"]);a!=null&&s(e,["response"],a);const c=r(t,["response","generateVideoResponse"]);return c!=null&&s(e,["result"],ls(o,c)),e}function us(o,t){const e={},n=r(t,["gcsUri"]);n!=null&&s(e,["uri"],n);const i=r(t,["bytesBase64Encoded"]);i!=null&&s(e,["videoBytes"],z(o,i));const l=r(t,["mimeType"]);return l!=null&&s(e,["mimeType"],l),e}function cs(o,t){const e={},n=r(t,["_self"]);return n!=null&&s(e,["video"],us(o,n)),e}function ds(o,t){const e={},n=r(t,["videos"]);n!=null&&(Array.isArray(n)?s(e,["generatedVideos"],n.map(u=>cs(o,u))):s(e,["generatedVideos"],n));const i=r(t,["raiMediaFilteredCount"]);i!=null&&s(e,["raiMediaFilteredCount"],i);const l=r(t,["raiMediaFilteredReasons"]);return l!=null&&s(e,["raiMediaFilteredReasons"],l),e}function Tt(o,t){const e={},n=r(t,["name"]);n!=null&&s(e,["name"],n);const i=r(t,["metadata"]);i!=null&&s(e,["metadata"],i);const l=r(t,["done"]);l!=null&&s(e,["done"],l);const u=r(t,["error"]);u!=null&&s(e,["error"],u);const a=r(t,["response"]);a!=null&&s(e,["response"],a);const c=r(t,["response"]);return c!=null&&s(e,["result"],ds(o,c)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fs extends _e{constructor(t){super(),this.apiClient=t}async get(t){const e=t.operation,n=t.config;if(e.name===void 0||e.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const l=e.name.split("/operations/")[0];var i=void 0;return n&&"httpOptions"in n&&(i=n.httpOptions),this.fetchPredictVideosOperationInternal({operationName:e.name,resourceName:l,config:{httpOptions:i}})}else return this.getVideosOperationInternal({operationName:e.name,config:n})}async getVideosOperationInternal(t){var e,n;let i,l="",u={};if(this.apiClient.isVertexAI()){const a=os(this.apiClient,t);return l=v("{operationName}",a._url),u=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions}).then(c=>c.json()),i.then(c=>Tt(this.apiClient,c))}else{const a=ns(this.apiClient,t);return l=v("{operationName}",a._url),u=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions}).then(c=>c.json()),i.then(c=>as(this.apiClient,c))}}async fetchPredictVideosOperationInternal(t){var e;let n,i="",l={};if(this.apiClient.isVertexAI()){const u=is(this.apiClient,t);return i=v("{resourceName}:fetchPredictOperation",u._url),l=u._query,delete u.config,delete u._url,delete u._query,n=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions}).then(a=>a.json()),n.then(a=>Tt(this.apiClient,a))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ps="Content-Type",ms="User-Agent",hs="x-goog-api-client",gs="0.7.0",ys=`google-genai-sdk/${gs}`,Cs="v1beta1",Es="v1beta",It=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class vs extends Error{constructor(t,e){e?super(t,{cause:e}):super(t,{cause:new Error().stack}),this.message=t,this.name="ClientError"}}class _t extends Error{constructor(t,e){e?super(t,{cause:e}):super(t,{cause:new Error().stack}),this.message=t,this.name="ServerError"}}class Ts{constructor(t){var e,n;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(e=this.clientOptions.apiVersion)!==null&&e!==void 0?e:Cs,this.getProject()||this.getLocation()?(i.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`,this.clientOptions.apiKey=void 0):(i.baseUrl="https://aiplatform.googleapis.com/",this.clientOptions.project=void 0,this.clientOptions.location=void 0)):(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:Es,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,t.httpOptions))}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const n=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&n.push(t.apiVersion),n.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),e=new URL(t);return e.protocol="wss",e.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,e){const n=[this.getRequestUrlInternal(e)];return this.clientOptions.vertexai&&!this.clientOptions.apiKey&&!t.startsWith("projects/")&&n.push(this.getBaseResourcePath()),t!==""&&n.push(t),new URL(`${n.join("/")}`)}async request(t){let e=this.clientOptions.httpOptions;t.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const n=this.constructUrl(t.path,e);if(t.queryParams)for(const[l,u]of Object.entries(t.queryParams))n.searchParams.append(l,String(u));let i={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=t.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,e),this.unaryApiCall(n,i,t.httpMethod)}patchHttpOptions(t,e){const n=JSON.parse(JSON.stringify(t));for(const[i,l]of Object.entries(e))typeof l=="object"?n[i]=Object.assign(Object.assign({},n[i]),l):l!==void 0&&(n[i]=l);return n}async requestStream(t){let e=this.clientOptions.httpOptions;t.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const n=this.constructUrl(t.path,e);(!n.searchParams.has("alt")||n.searchParams.get("alt")!=="sse")&&n.searchParams.set("alt","sse");let i={};return i.body=t.body,i=await this.includeExtraHttpOptionsToRequestInit(i,e),this.streamApiCall(n,i,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,e){if(e&&e.timeout&&e.timeout>0){const n=new AbortController,i=n.signal;setTimeout(()=>n.abort(),e.timeout),t.signal=i}return t.headers=await this.getHeadersInternal(e),t}async unaryApiCall(t,e,n){return this.apiCall(t.toString(),Object.assign(Object.assign({},e),{method:n})).then(async i=>(await At(i),new Ut(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(t,e,n){return this.apiCall(t.toString(),Object.assign(Object.assign({},e),{method:n})).then(async i=>(await At(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(t){var e;return Ee(this,arguments,function*(){const i=(e=t==null?void 0:t.body)===null||e===void 0?void 0:e.getReader(),l=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let u="";for(;;){const{done:a,value:c}=yield P(i.read());if(a){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=l.decode(c);u+=d;let f=u.match(It);for(;f;){const p=f[1];try{const h=JSON.parse(p);yield yield P(h),u=u.slice(f[0].length),f=u.match(It)}catch(h){throw new Error(`exception parsing stream chunk ${p}. ${h}`)}}}}finally{i.releaseLock()}})}async apiCall(t,e){return fetch(t,e).catch(n=>{throw new Error(`exception ${n} sending request`)})}getDefaultHeaders(){const t={},e=ys+" "+this.clientOptions.userAgentExtra;return t[ms]=e,t[hs]=e,t[ps]="application/json",t}async getHeadersInternal(t){const e=new Headers;if(t&&t.headers)for(const[n,i]of Object.entries(t.headers))e.append(n,i);return await this.clientOptions.auth.addAuthHeaders(e),e}async uploadFile(t,e){var n;const i={};e!=null&&(i.mimeType=e.mimeType,i.name=e.name,i.displayName=e.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const l=this.clientOptions.uploader,u=await l.stat(t);i.sizeBytes=String(u.size);const a=(n=e==null?void 0:e.mimeType)!==null&&n!==void 0?n:u.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=a;const c=await this.fetchUploadUrl(i,e);return l.upload(t,c,this)}async fetchUploadUrl(t,e){var n;let i={};e!=null&&e.httpOptions?i=e.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${t.mimeType}`}};const l={file:t},u=await this.request({path:v("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:i});if(!u||!(u!=null&&u.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const a=(n=u==null?void 0:u.headers)===null||n===void 0?void 0:n["x-goog-upload-url"];if(a===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return a}}async function At(o){var t;if(o===void 0)throw new _t("response is undefined");if(!o.ok){const e=o.status,n=o.statusText;let i;!((t=o.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?i=await o.json():i={error:{message:"exception parsing response",code:o.status,status:o.statusText}};const l=`got status: ${e} ${n}. ${JSON.stringify(i)}`;throw e>=400&&e<500?new vs(l):e>=500&&e<600?new _t(l):new Error(l)}}const Is=1024*1024*8;async function _s(o,t,e){var n,i;let l=0,u=0,a=new Ut(new Response),c="upload";for(l=o.size;u<l;){const f=Math.min(Is,l-u),p=o.slice(u,u+f);if(u+f>=l&&(c+=", finalize"),a=await e.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(u),"Content-Length":String(f)}}}),u+=f,((n=a==null?void 0:a.headers)===null||n===void 0?void 0:n["x-goog-upload-status"])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const d=await(a==null?void 0:a.json());if(((i=a==null?void 0:a.headers)===null||i===void 0?void 0:i["x-goog-upload-status"])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return d.file}async function As(o){return{size:o.size,type:o.type}}class Ss{async upload(t,e,n){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await _s(t,e,n)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await As(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ms{create(t,e,n){return new Rs(t,e,n)}}class Rs{constructor(t,e,n){this.url=t,this.headers=e,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const St="x-goog-api-key";class Ps{constructor(t){this.apiKey=t}async addAuthHeaders(t){t.get(St)===null&&t.append(St,this.apiKey)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ws="gl-node/";class xs{constructor(t){var e;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(e=t.vertexai)!==null&&e!==void 0?e:!1,this.apiKey=t.apiKey,this.apiVersion=t.apiVersion;const n=new Ps(this.apiKey);this.apiClient=new Ts({auth:n,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:t.httpOptions,userAgentExtra:ws+"web",uploader:new Ss}),this.models=new ts(this.apiClient),this.live=new Xi(this.apiClient,n,new Ms),this.chats=new Qn(this.models,this.apiClient),this.caches=new Wn(this.apiClient),this.files=new co(this.apiClient),this.operations=new fs(this.apiClient)}}/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*/const ie=document.querySelector("form"),N=document.querySelector("#ingredients"),H=document.querySelector("#servings"),Re=document.querySelector("#servings-decrement"),Pe=document.querySelector("#servings-increment"),ve=document.querySelector("#meal-prep-toggle"),K=document.querySelector("#allergies"),Q=document.querySelector("#suggestions"),_=document.querySelector("#voice-input-btn"),oe=document.querySelector("#voice-error"),G=document.querySelector("#save-allergies-btn"),Mt=document.querySelector("#result-area"),M=document.querySelector("#results"),se=document.querySelector("#skeleton-loader"),b=document.querySelector("#recipe-list-view"),X=document.querySelector("#recipe-detail-view"),Y=document.querySelector("#pagination-controls"),re=document.querySelector("#prev-page-btn"),le=document.querySelector("#next-page-btn"),Rt=document.querySelector("#page-indicator"),fe=document.querySelector("#history-container"),$=document.querySelector("#theme-switcher"),Ns=document.getElementById("search-area"),Ls=document.getElementById("favorites-area"),Ds=document.getElementById("shopping-list-area"),Te={search:document.getElementById("nav-search"),favorites:document.getElementById("nav-favorites"),shoppingList:document.getElementById("nav-shopping-list")},Vs=[Ns,Ls,Ds],Kt=Object.values(Te).filter(o=>o!==null),pe=document.querySelector("#favorites-container"),Z=document.querySelector("#shopping-list-container"),we=document.querySelector("#shopping-list-actions"),k=document.querySelector("#copy-shopping-list"),Jt=o=>{!M||!Y||!se||(M.innerHTML=`<p class="error">${o}</p>`,Y.classList.add("hidden"),se.classList.add("hidden"),M.scrollIntoView({behavior:"smooth"}))},Wt="recipe-app-history",zt="recipe-app-favorites",bt="recipe-app-shopping-list",Xt="recipe-app-allergies";let J=[],R=null,D=new Set,B=new Map,O=null;const Fs="AIzaSyD77Nyix5zvD7hJGlhOe3DV2jacM66Degk",qs=new xs({apiKey:Fs}),Us=()=>{try{const o=localStorage.getItem(Wt);o&&(J=JSON.parse(o));const t=localStorage.getItem(zt);t&&(D=new Set(JSON.parse(t)));const e=localStorage.getItem(bt);if(e){const l=JSON.parse(e);l.forEach(u=>{u[1].items=new Set(u[1].items)}),B=new Map(l)}const n=localStorage.getItem(Xt);n&&K&&(K.value=n);const i=localStorage.getItem("recipe-app-theme");i==="dark"?(document.documentElement.classList.add("dark-mode"),$&&($.checked=!0)):i==="light"?(document.documentElement.classList.remove("dark-mode"),$&&($.checked=!1)):window.matchMedia("(prefers-color-scheme: dark)").matches&&$&&($.checked=!0)}catch(o){console.error("Error loading state from local storage:",o)}},Gs=()=>{localStorage.setItem(Wt,JSON.stringify(J))},ks=()=>{localStorage.setItem(zt,JSON.stringify(Array.from(D)))},Qt=()=>{const o=Array.from(B.entries()).map(([t,e])=>[t,{...e,items:Array.from(e.items)}]);localStorage.setItem(bt,JSON.stringify(o))},Hs=o=>{localStorage.setItem(Xt,o)},Zt=(o,t)=>{const e=document.createElement("button");e.className="result-card",e.dataset.recipeId=o.id,e.innerHTML=`
        <div class="result-card-image" style="background-image: url('https://placehold.jp/30/cccccc/ffffff/300x200.png?text=${encodeURIComponent(o.recipeName)}')"></div>
        <div class="result-card-summary">
            <div class="result-card-text">
                <h3>${o.recipeName}</h3>
                <div class="recipe-meta">
                    <span>${o.cookingTime}</span>
                    <span>${o.servings}</span>
                </div>
            </div>
            <button class="like-btn" aria-label="" data-recipe-id="${o.id}">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                </svg>
            </button>
        </div>
    `;const n=e.querySelector(".like-btn");D.has(o.id)&&(n==null||n.classList.add("liked")),n==null||n.addEventListener("click",l=>{l.stopPropagation(),en(o.id),n.classList.toggle("liked"),Fe(),ue()});const i=()=>{Se("search-area"),Bs(o,t)};return e.addEventListener("click",i),e.addEventListener("keydown",l=>{(l.key==="Enter"||l.key===" ")&&i()}),e},Ie=()=>{if(!R||!M)return;const o=R.pages[R.currentPageIndex];M.innerHTML="",o&&o.length>0?o.forEach(t=>{M.appendChild(Zt(t,"search"))}):M.innerHTML='<p class="placeholder"></p>',$s()},$s=()=>{if(!R||!Y||!Rt||!re||!le)return;const{currentPageIndex:o,pages:t}=R,e=t.length;e>1?(Y.classList.remove("hidden"),Rt.textContent=`${o+1} / ${e}`,re.disabled=o===0,le.disabled=o===e-1):Y.classList.add("hidden")},jt=()=>{if(fe){if(fe.innerHTML="",J.length===0){fe.innerHTML='<p class="placeholder"></p>';return}J.slice().reverse().forEach(o=>{const t=document.createElement("button");t.className="history-item",t.dataset.historyId=o.id,t.innerHTML=`
            <span class="history-ingredients">${o.query.ingredients}</span>
            <div class="history-meta">
                <span>${o.query.servings}</span>
                ${o.query.mealPrep?"<span></span>":""}
                ${o.query.allergies?`<span>: ${o.query.allergies}</span>`:""}
            </div>
        `,t.addEventListener("click",()=>Ks(o.id)),fe.appendChild(t)})}},en=o=>{D.has(o)?D.delete(o):D.add(o),ks()},Fe=()=>{if(!pe)return;if(pe.innerHTML="",D.size===0){pe.innerHTML='<p class="placeholder"></p>';return}J.flatMap(e=>e.pages).flat().filter(e=>D.has(e.id)).forEach(e=>{pe.appendChild(Zt(e,"favorites"))})},Le=()=>{if(!(!Z||!we)){if(Z.innerHTML="",B.size===0){Z.innerHTML='<p class="placeholder"></p>',we.classList.add("hidden");return}we.classList.remove("hidden");for(const[o,t]of B.entries()){const e=document.createElement("div");e.className="shopping-list-group";const n=Array.from(t.items).map(i=>`<li>${i}</li>`).join("");e.innerHTML=`
            <div class="shopping-list-group-header">
                <h3>${t.recipeInfo.recipeName}</h3>
                <button class="remove-recipe-btn" data-recipe-id="${o}"></button>
            </div>
            <ul>${n}</ul>
        `,Z.appendChild(e)}}},tn=()=>{if(!Q)return;const o=new Map;J.forEach(e=>{e.query.ingredients.split(/,||\s+/).map(i=>i.trim()).filter(i=>i).forEach(i=>{o.set(i,(o.get(i)||0)+1)})});const t=Array.from(o.entries()).sort((e,n)=>n[1]-e[1]).map(e=>e[0]).slice(0,7);Q.innerHTML="",t.length>0?t.forEach(e=>{const n=document.createElement("button");n.type="button",n.className="suggestion-btn",n.textContent=e,Q.appendChild(n)}):["","","","","","",""].forEach(n=>{const i=document.createElement("button");i.type="button",i.className="suggestion-btn",i.textContent=n,Q.appendChild(i)})},Ae=()=>{!b||!X||(X.classList.add("hidden"),b.classList.remove("hidden"),M==null||M.scrollIntoView({behavior:"smooth",block:"start"}))},Bs=(o,t)=>{var i,l,u;if(!b||!X)return;b.classList.add("hidden"),X.classList.remove("hidden");const e=o.ingredients.map(a=>`
        ${a.subHeading?`<h4 class="material-subheading">${a.subHeading}</h4>`:""}
        ${a.items.map(c=>`<li><label><input type="checkbox" data-ingredient="${c}"> ${c}</label></li>`).join("")}
    `).join(""),n=o.instructions.map((a,c)=>`<li><div class="step-number">${c+1}</div><p>${a}</p></li>`).join("");X.innerHTML=`
        <div class="recipe-detail-header">
             <button id="back-to-list-btn"> </button>
             <button id="detail-like-btn" class="like-btn ${D.has(o.id)?"liked":""}" aria-label="" data-recipe-id="${o.id}">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                </svg>
            </button>
        </div>
        <h2 class="recipe-detail-title">${o.recipeName}</h2>
        <div class="recipe-meta">
            <span>${o.cookingTime}</span>
            <span>${o.servings}</span>
        </div>
        ${o.description?`<p class="recipe-description">${o.description}</p>`:""}

        <h4></h4>
        <p class="pantry-check-instruction"></p>
        <ul class="ingredient-list">${e}</ul>

        <h4></h4>
        <ol class="instructions-list">${n}</ol>

        <div class="detail-actions">
            <button id="add-to-shopping-list-from-detail"></button>
        </div>
    `,(i=document.getElementById("back-to-list-btn"))==null||i.addEventListener("click",()=>{t==="favorites"?Se("favorites-area"):Ae()}),(l=document.getElementById("detail-like-btn"))==null||l.addEventListener("click",a=>{const c=a.currentTarget;en(o.id),c.classList.toggle("liked");const d=b==null?void 0:b.querySelector(`.result-card[data-recipe-id="${o.id}"] .like-btn`);d==null||d.classList.toggle("liked",D.has(o.id)),Fe(),ue()}),(u=document.getElementById("add-to-shopping-list-from-detail"))==null||u.addEventListener("click",()=>{const a=X.querySelectorAll('.ingredient-list input[type="checkbox"]:checked'),c=Array.from(a).map(f=>f.dataset.ingredient||""),d=document.getElementById("add-to-shopping-list-from-detail");if(d)if(c.length>0){const f={id:o.id,recipeName:o.recipeName},p=B.get(o.id)||{recipeInfo:f,items:new Set};c.forEach(h=>p.items.add(h)),B.set(o.id,p),Qt(),Le(),ue(),d.textContent="",d.disabled=!0,setTimeout(()=>{d.textContent="",d.disabled=!1},2e3)}else d.textContent="",d.disabled=!0,setTimeout(()=>{d.textContent="",d.disabled=!1},2e3)}),X.scrollIntoView({behavior:"smooth",block:"start"})},Se=o=>{Vs.forEach(n=>n==null?void 0:n.classList.add("hidden")),Kt.forEach(n=>n==null?void 0:n.classList.remove("active"));const t=document.getElementById(o);t==null||t.classList.remove("hidden");const e=Te[o.replace("-area","")];e==null||e.classList.add("active"),o==="search-area"&&Ae()},Os=async o=>{const{ingredients:t,servings:e,mealPrep:n,allergies:i}=o,l=`
        ${t}5
        - : ${e}
        ${n?"- ":""}
        ${i?`- /${i}`:""}
        - 
        - description
        - JSON
    `,u={type:S.ARRAY,items:{type:S.OBJECT,properties:{recipeName:{type:S.STRING,description:""},description:{type:S.STRING,description:"(2-3)"},servings:{type:S.STRING,description:' (: "2")'},cookingTime:{type:S.STRING,description:' (: "20")'},ingredients:{type:S.ARRAY,description:"subHeading",items:{type:S.OBJECT,properties:{subHeading:{type:S.STRING,description:' (: "", "")'},items:{type:S.ARRAY,items:{type:S.STRING,description:' (: " 200g")'}}},required:["items"]}},instructions:{type:S.ARRAY,description:"",items:{type:S.STRING}}},required:["recipeName","servings","cookingTime","ingredients","instructions","description"]}};try{const c=(await qs.models.generateContent({model:"gemini-2.5-flash",contents:l,config:{responseMimeType:"application/json",responseSchema:u}})).text;return JSON.parse(c).map(f=>({...f,id:`recipe-${Date.now()}-${Math.random()}`}))}catch(a){return console.error("Gemini API call failed:",a),Jt(""),null}},Ys=async o=>{if(o.preventDefault(),!ie||!N||!H||!ve||!K||!se||!M||!Mt)return;const t=ie.querySelector('button[type="submit"]');if(!t)return;const e=N.value.trim();if(!e){N.classList.add("invalid"),Jt("");return}N.classList.remove("invalid"),t.disabled=!0,t.textContent="...",M.innerHTML="",Y==null||Y.classList.add("hidden"),se.classList.remove("hidden"),Mt.scrollIntoView({behavior:"smooth"});const n={ingredients:e,servings:H.value,mealPrep:ve.checked,allergies:K.value.trim()},i=await Os(n);if(i){const l={id:`history-${Date.now()}`,query:n,pages:[i],currentPageIndex:0};J.push(l),R=l,Gs(),jt(),tn(),Ie(),Ae()}se.classList.add("hidden"),t.disabled=!1,t.textContent=""},Ks=o=>{const t=J.find(e=>e.id===o);t&&(R=t,N&&(N.value=t.query.ingredients),H&&(H.value=t.query.servings),ve&&(ve.checked=t.query.mealPrep),K&&(K.value=t.query.allergies),Ie(),Ae(),Se("search-area"),M==null||M.scrollIntoView({behavior:"smooth"}))},ue=()=>{var e,n;const o=(e=Te.favorites)==null?void 0:e.querySelector(".badge"),t=(n=Te.shoppingList)==null?void 0:n.querySelector(".badge");o&&(D.size>0?(o.textContent=String(D.size),o.classList.remove("hidden")):o.classList.add("hidden")),t&&(B.size>0?(t.textContent=String(B.size),t.classList.remove("hidden")):t.classList.add("hidden"))},Js=()=>{Us(),jt(),tn(),Fe(),Le(),ue(),ie==null||ie.addEventListener("submit",Ys),Re==null||Re.addEventListener("click",()=>{H==null||H.stepDown()}),Pe==null||Pe.addEventListener("click",()=>{H==null||H.stepUp()}),Q==null||Q.addEventListener("click",t=>{const e=t.target;if(e.classList.contains("suggestion-btn")&&N){const n=N.value.trim();N.value=n?`${n}${e.textContent}`:e.textContent||""}}),G==null||G.addEventListener("click",()=>{K&&G&&(Hs(K.value),G.textContent="",G.classList.add("saved"),G.disabled=!0,setTimeout(()=>{G.textContent="",G.classList.remove("saved"),G.disabled=!1},2e3))}),re==null||re.addEventListener("click",()=>{R&&R.currentPageIndex>0&&(R.currentPageIndex--,Ie())}),le==null||le.addEventListener("click",()=>{R&&R.currentPageIndex<R.pages.length-1&&(R.currentPageIndex++,Ie())}),Kt.forEach(t=>{t==null||t.addEventListener("click",()=>{const e=t.id.replace("nav-","");Se(`${e}-area`)})}),Z==null||Z.addEventListener("click",t=>{const e=t.target;if(e.classList.contains("remove-recipe-btn")){const n=e.dataset.recipeId;n&&(B.delete(n),Qt(),Le(),ue())}}),k==null||k.addEventListener("click",()=>{let t=`
==========

`;B.forEach(e=>{t+=` ${e.recipeInfo.recipeName}
`,e.items.forEach(n=>{t+=`- ${n}
`}),t+=`
`}),navigator.clipboard.writeText(t).then(()=>{k&&(k.textContent="",k.disabled=!0,setTimeout(()=>{k.textContent="",k.disabled=!1},2e3))}).catch(e=>{console.error("Failed to copy text: ",e),k&&(k.textContent="")})}),$==null||$.addEventListener("change",()=>{$.checked?(document.documentElement.classList.add("dark-mode"),localStorage.setItem("recipe-app-theme","dark")):(document.documentElement.classList.remove("dark-mode"),localStorage.setItem("recipe-app-theme","light"))});const o=window.SpeechRecognition||window.webkitSpeechRecognition;if(o){O=new o,O.continuous=!1,O.lang="ja-JP",O.interrimResults=!1;const t=l=>{oe&&(oe.textContent=l,oe.classList.remove("hidden"))},e=()=>{oe&&oe.classList.add("hidden")},n=()=>{t(""),_&&(_.disabled=!0,_.setAttribute("aria-label"," ()"),_.setAttribute("title",""))},i=()=>{e(),_&&(_.disabled=!1,_.setAttribute("aria-label",""),_.setAttribute("title",""))};navigator.permissions?navigator.permissions.query({name:"microphone"}).then(l=>{const u=()=>{l.state==="denied"?n():i()};u(),l.onchange=u}).catch(l=>{console.warn("Could not query microphone permissions. Relying on onerror.",l),i()}):i(),O.onresult=l=>{const u=l.results[0][0].transcript.replace(//g,"");if(N){const a=N.value.trim();N.value=a?`${a}${u}`:u}},O.onerror=l=>{console.error("Speech recognition error",l.error);let u="";l.error==="not-allowed"?n():l.error==="no-speech"?(u="",t(u)):l.error==="network"?(u="",t(u)):l.error==="service-not-allowed"?(u="HTTPS",t(u),_&&(_.disabled=!0)):t(u)},O.onend=()=>{_==null||_.classList.remove("is-listening")},_==null||_.addEventListener("click",()=>{O&&_&&!_.disabled&&(e(),_.classList.add("is-listening"),O.start())})}else console.warn("Speech Recognition API not supported."),_==null||_.remove()};document.addEventListener("DOMContentLoaded",Js);
